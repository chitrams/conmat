<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Given some age breaks, return a named list of matrices containing
age-specific relative per-contact transmission probability matrices for each
of 4 settings: home, school, work, other. These can be combined with contact
matrices to produce setting-specific relative next generation matrices
(NGMs). These can be scaled to match a required reproduction number based on
the dominant eigenvalue of the all-settings NGM (the elementwise sum of all
setting NGMs)."><title>Get Setting Transmission Matrices — get_setting_transmission_matrices • conmat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Setting Transmission Matrices — get_setting_transmission_matrices"><meta property="og:description" content="Given some age breaks, return a named list of matrices containing
age-specific relative per-contact transmission probability matrices for each
of 4 settings: home, school, work, other. These can be combined with contact
matrices to produce setting-specific relative next generation matrices
(NGMs). These can be scaled to match a required reproduction number based on
the dominant eigenvalue of the all-settings NGM (the elementwise sum of all
setting NGMs)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">conmat</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9004</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/conmat-population.html">conmat-population</a>
    <a class="dropdown-item" href="../articles/data-sources.html">Data Sources</a>
    <a class="dropdown-item" href="../articles/example-pipeline.html">Example Pipeline</a>
    <a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/other-data-sources.html">Using other data soruces</a>
    <a class="dropdown-item" href="../articles/parallel-computing.html">parallel-computing</a>
    <a class="dropdown-item" href="../articles/visualising-conmat.html">Visualisation Gallery</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Get Setting Transmission Matrices</h1>
      
      <div class="d-none name"><code>get_setting_transmission_matrices.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given some age breaks, return a named list of matrices containing
age-specific relative per-contact transmission probability matrices for each
of 4 settings: home, school, work, other. These can be combined with contact
matrices to produce setting-specific relative next generation matrices
(NGMs). These can be scaled to match a required reproduction number based on
the dominant eigenvalue of the all-settings NGM (the elementwise sum of all
setting NGMs).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_setting_transmission_matrices</span><span class="op">(</span></span>
<span>  age_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  asymptomatic_relative_infectiousness <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  susceptibility_estimate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"davies_updated"</span>, <span class="st">"davies_original"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>age_breaks</dt>
<dd><p>vector of age breaks, defaults to
<code>c(seq(0, 80, by = 5), Inf)</code></p></dd>


<dt>asymptomatic_relative_infectiousness</dt>
<dd><p>the assumed ratio of onward
infectiousness between asymptomatic and symptomatic cases. This represents
the infectiousness of asymptomatic relative to symptomatic.
Default value is 0.5, which means the asymptomatic cases are 50% less
infectious than symptomatic cases.</p></dd>


<dt>susceptibility_estimate</dt>
<dd><p>Which estimate to use for susceptibility by
age. Either, the smoothed original Davies et al estimates,
"davies_original" or, the set updated to match UK under-16 infections
(the default), "davies_updated".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list of matrices, containing the relative per-contact transmission
probability for each setting</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These matrices are created from: an estimate of the clinical fraction for
each age (inferred by applying a smoothing spline to the mean estimates from
Davies et al.); an assumption of the infectiousness of asymptomatics relative
to symptomatics (provided as an argument); estimates of the relative
susceptibility to infection of individuals of different ages, inferred from a
smoothing-spline estimate of the mean relative susceptibility estimate from
Davies et al., combined with a re-estimation of the susceptibility profile
for under-16s, estimated in a similar way but to the age-distribution of
infections in England from the UK ONS prevalence survey (rather than case
counts with may undercount children), assuming the above clinical fraction
estimates, and accounting for vaccination, reduced mixing, and reduced
transmissibility in work and other settings due to hygiene behaviour; and
estimates of the relative transmissibility in household vs non-household
settings - scaled linearly for non-household transmission and binomially for
household transmission (so that onward onfections do not to exceed the number
of other household members).</p>
<p>When using this data, ensure that you cite this package, and the original
authors of the paper from which these estimates were derived:</p>
<p>Davies, N.G., Klepac, P., Liu, Y. et al. Age-dependent effects in the
transmission and control of COVID-19 epidemics. Nat Med 26, 1205–1211 (2020).
https://doi.org/10.1038/s41591-020-0962-9</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># fit polymod model</span></span></span>
<span class="r-in"><span><span class="va">setting_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="fit_setting_contacts.html">fit_setting_contacts</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  contact_data_list <span class="op">=</span> <span class="fu"><a href="get_polymod_setting_data.html">get_polymod_setting_data</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  population <span class="op">=</span> <span class="fu"><a href="get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define age breaks for prediction</span></span></span>
<span class="r-in"><span><span class="va">age_breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define a new population age distribution to predict to</span></span></span>
<span class="r-in"><span><span class="va">fairfield_age_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="abs_age_data.html">abs_age_lga</a></span><span class="op">(</span><span class="st">"Fairfield (C)"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># predict setting-specific contact matrices to a new population</span></span></span>
<span class="r-in"><span><span class="va">contact_matrices</span> <span class="op">&lt;-</span> <span class="fu"><a href="predict_setting_contacts.html">predict_setting_contacts</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  population <span class="op">=</span> <span class="va">fairfield_age_pop</span>,</span></span>
<span class="r-in"><span>  contact_model <span class="op">=</span> <span class="va">setting_models</span>,</span></span>
<span class="r-in"><span>  age_breaks <span class="op">=</span> <span class="va">age_breaks</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the 'all' matrix, keep the other four settings</span></span></span>
<span class="r-in"><span><span class="va">contact_matrices</span> <span class="op">&lt;-</span> <span class="va">contact_matrices</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"home"</span>, <span class="st">"school"</span>, <span class="st">"work"</span>, <span class="st">"other"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get setting-specific per-contact transmission rate matrices for the same</span></span></span>
<span class="r-in"><span><span class="co"># age aggregations</span></span></span>
<span class="r-in"><span><span class="va">transmission_matrices</span> <span class="op">&lt;-</span> <span class="fu">get_setting_transmission_matrices</span><span class="op">(</span></span></span>
<span class="r-in"><span>  age_breaks <span class="op">=</span> <span class="va">age_breaks</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># combine them to get setting-specific (unscaled) next-generation matrices</span></span></span>
<span class="r-in"><span><span class="va">next_generation_matrices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  FUN <span class="op">=</span> <span class="va">`*`</span>,</span></span>
<span class="r-in"><span>  <span class="va">contact_matrices</span>,</span></span>
<span class="r-in"><span>  <span class="va">transmission_matrices</span>,</span></span>
<span class="r-in"><span>  SIMPLIFY <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get the all-settings NGM</span></span></span>
<span class="r-in"><span><span class="va">ngm_overall</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Reduce</a></span><span class="op">(</span><span class="st">"+"</span>, <span class="va">next_generation_matrices</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nicholas Tierney, <a href="https://www.telethonkids.org.au/contact-us/our-people/g/nick-golding/" class="external-link">Nick Golding</a>, <a href="https://aarathybabu.netlify.app/" class="external-link">Aarathy Babu</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

