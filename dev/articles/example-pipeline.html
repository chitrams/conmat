<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="conmat">
<title>Example Pipeline • conmat</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example Pipeline">
<meta property="og:description" content="conmat">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">conmat</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/conmat-population.html">Conmat Population Data</a>
    <a class="dropdown-item" href="../articles/data-sources.html">Data Sources</a>
    <a class="dropdown-item" href="../articles/example-pipeline.html">Example Pipeline</a>
    <a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/other-data-sources.html">Using other data sources</a>
    <a class="dropdown-item" href="../articles/parallel-computing.html">Parallel Computing</a>
    <a class="dropdown-item" href="../articles/sir-model.html">SIR modelling with conmat</a>
    <a class="dropdown-item" href="../articles/visualising-conmat.html">Visualisation gallery</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Example Pipeline</h1>
            
      
      
      <div class="d-none name"><code>example-pipeline.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">conmat</span><span class="op">)</span></span></code></pre></div>
<p>This vignette outlines a basic workflow of:</p>
<ul>
<li>Create a new synthetic matrix by extrapolating from POLYMOD data to
a new age distribution</li>
<li>Generating a Next Generation Matrix</li>
<li>Applying Vaccination Rates</li>
<li>Comparing R0 before and post vaccination rates</li>
</ul>
<div class="section level3">
<h3 id="create-a-new-synthetic-matrix-from-all-polymod-data">Create a new synthetic matrix from all POLYMOD data<a class="anchor" aria-label="anchor" href="#create-a-new-synthetic-matrix-from-all-polymod-data"></a>
</h3>
<p>We can create a synthetic matrix from all POLYMOD data by using the
<code>extrapolate_polymod</code> function. First, let’s extract an age
distribution from the ABS data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fairfield</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/abs_age_data.html">abs_age_lga</a></span><span class="op">(</span><span class="st">"Fairfield (C)"</span><span class="op">)</span></span>
<span><span class="va">fairfield</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 18 × 4</span> <span style="color: #BB0000;">(conmat_population)</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555;">- age: </span><span style="color: #555555; font-weight: bold;">lower.age.limit</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555;">- population: </span><span style="color: #555555; font-weight: bold;">population</span></span></span>
<span><span class="co">#&gt;    lga           lower.age.limit  year population</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Fairfield (C)               0  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">12</span>261</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Fairfield (C)               5  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">13</span>093</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Fairfield (C)              10  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">13</span>602</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Fairfield (C)              15  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">14</span>323</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Fairfield (C)              20  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">15</span>932</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Fairfield (C)              25  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">16</span>190</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Fairfield (C)              30  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">14</span>134</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Fairfield (C)              35  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">13</span>034</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Fairfield (C)              40  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">12</span>217</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Fairfield (C)              45  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">13</span>449</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> Fairfield (C)              50  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">13</span>419</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> Fairfield (C)              55  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">13</span>652</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> Fairfield (C)              60  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">12</span>907</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> Fairfield (C)              65  <span style="text-decoration: underline;">2</span>020      <span style="text-decoration: underline;">10</span>541</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> Fairfield (C)              70  <span style="text-decoration: underline;">2</span>020       <span style="text-decoration: underline;">8</span>227</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> Fairfield (C)              75  <span style="text-decoration: underline;">2</span>020       <span style="text-decoration: underline;">5</span>598</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> Fairfield (C)              80  <span style="text-decoration: underline;">2</span>020       <span style="text-decoration: underline;">4</span>006</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> Fairfield (C)              85  <span style="text-decoration: underline;">2</span>020       <span style="text-decoration: underline;">4</span>240</span></span></code></pre></div>
<p>Note that this is a <code>conmat_population</code> object, which is
just a data frame that knows which columns represent the
<code>age</code> and <code>population</code> information.</p>
<p>We then extrapolate this to home, work, school, other and all
settings, using the full POLYMOD data. This gives us a setting
prediction matrix.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_breaks_0_80_plus</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">synthetic_fairfield_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extrapolate_polymod.html">extrapolate_polymod</a></span><span class="op">(</span></span>
<span>  population <span class="op">=</span> <span class="va">fairfield</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span></span>
<span><span class="op">)</span></span>
<span><span class="va">synthetic_fairfield_5y</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Setting Prediction Matrices</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">A list of matrices containing the model predicted contact rate between ages in</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">each setting.</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">There are 17 age breaks, ranging 0-80+ years, with a regular 5 year interval</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">home</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">work</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">school</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">other</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">all</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Access each <span style="color: #0000BB;">&lt;matrix&gt;</span> with `x$name`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> e.g., `x$home`</span></span>
<span><span class="va">synthetic_fairfield_5y</span><span class="op">$</span><span class="va">home</span></span>
<span><span class="co">#&gt;               [0,5)     [5,10)    [10,15)    [15,20)    [20,25)    [25,30)</span></span>
<span><span class="co">#&gt; [0,5)    0.52331991 0.43331026 0.21604527 0.14520119 0.20706225 0.39297905</span></span>
<span><span class="co">#&gt; [5,10)   0.45819719 0.74130671 0.48785205 0.17693732 0.11536809 0.19943984</span></span>
<span><span class="co">#&gt; [10,15)  0.24053181 0.51364426 0.84142890 0.43448783 0.14787240 0.11032767</span></span>
<span><span class="co">#&gt; [15,20)  0.17249165 0.19877597 0.46360462 0.74624759 0.37589888 0.14292140</span></span>
<span><span class="co">#&gt; [20,25)  0.26436767 0.13929633 0.16957694 0.40399925 0.63610888 0.34651307</span></span>
<span><span class="co">#&gt; [25,30)  0.50625036 0.24297098 0.12765936 0.15498702 0.34962956 0.54785508</span></span>
<span><span class="co">#&gt; [30,35)  0.63832925 0.49444540 0.23140771 0.12060556 0.13960249 0.30266672</span></span>
<span><span class="co">#&gt; [35,40)  0.44367676 0.60110421 0.44986554 0.20873270 0.10533083 0.11842552</span></span>
<span><span class="co">#&gt; [40,45)  0.22980603 0.38985778 0.51253279 0.38269461 0.17221002 0.08519447</span></span>
<span><span class="co">#&gt; [45,50)  0.15723783 0.20068263 0.33214619 0.43868096 0.31697065 0.14167357</span></span>
<span><span class="co">#&gt; [50,55)  0.16762689 0.13835773 0.17273223 0.28568338 0.36182341 0.26267731</span></span>
<span><span class="co">#&gt; [55,60)  0.19626851 0.14336034 0.11546058 0.14166508 0.22350893 0.28806870</span></span>
<span><span class="co">#&gt; [60,65)  0.17259891 0.15185593 0.10648350 0.08193061 0.09666623 0.15947239</span></span>
<span><span class="co">#&gt; [65,70)  0.10640195 0.11872082 0.09779557 0.06316338 0.04709905 0.06025166</span></span>
<span><span class="co">#&gt; [70,75)  0.05651045 0.06939264 0.07043323 0.05234543 0.03355246 0.02817056</span></span>
<span><span class="co">#&gt; [75,80)  0.03050367 0.03639643 0.03940738 0.03582935 0.02740058 0.02045005</span></span>
<span><span class="co">#&gt; [80,Inf) 0.02395838 0.03015550 0.03077152 0.02945082 0.02978919 0.02983457</span></span>
<span><span class="co">#&gt;             [30,35)    [35,40)    [40,45)    [45,50)    [50,55)    [55,60)</span></span>
<span><span class="co">#&gt; [0,5)    0.53781315 0.41150516 0.22216716 0.14725517 0.15134817 0.17599794</span></span>
<span><span class="co">#&gt; [5,10)   0.44051273 0.58953802 0.39854569 0.19873609 0.13209621 0.13593754</span></span>
<span><span class="co">#&gt; [10,15)  0.21706622 0.46453568 0.55165538 0.34631439 0.17363394 0.11527056</span></span>
<span><span class="co">#&gt; [15,20)  0.12071240 0.22998365 0.43950993 0.48804535 0.30641947 0.15090987</span></span>
<span><span class="co">#&gt; [20,25)  0.15017141 0.12473017 0.21256135 0.37900067 0.41709748 0.25589349</span></span>
<span><span class="co">#&gt; [25,30)  0.32850901 0.14149786 0.10610254 0.17092213 0.30552869 0.33277368</span></span>
<span><span class="co">#&gt; [30,35)  0.47860229 0.28321487 0.11127348 0.08021956 0.13306181 0.24107694</span></span>
<span><span class="co">#&gt; [35,40)  0.25727295 0.40856551 0.22887741 0.08817326 0.06688246 0.11370183</span></span>
<span><span class="co">#&gt; [40,45)  0.09697502 0.21958015 0.36144787 0.20731196 0.08507515 0.06541272</span></span>
<span><span class="co">#&gt; [45,50)  0.07216946 0.08732367 0.21400765 0.37912952 0.23092412 0.09433839</span></span>
<span><span class="co">#&gt; [50,55)  0.12416712 0.06870484 0.09109356 0.23952415 0.44032574 0.26149895</span></span>
<span><span class="co">#&gt; [55,60)  0.22650897 0.11760319 0.07052185 0.09852468 0.26329736 0.47773278</span></span>
<span><span class="co">#&gt; [60,65)  0.22823247 0.19661252 0.10653881 0.06504924 0.09249990 0.25326537</span></span>
<span><span class="co">#&gt; [65,70)  0.11336576 0.17658002 0.15281395 0.08122303 0.05070187 0.07696039</span></span>
<span><span class="co">#&gt; [70,75)  0.04150215 0.08312102 0.12669812 0.10702841 0.05933634 0.04034025</span></span>
<span><span class="co">#&gt; [75,80)  0.01958401 0.02952000 0.05688943 0.08648014 0.07835045 0.04720490</span></span>
<span><span class="co">#&gt; [80,Inf) 0.02658190 0.02319721 0.02836220 0.05237460 0.09304130 0.10996504</span></span>
<span><span class="co">#&gt;             [60,65)    [65,70)    [70,75)    [75,80)   [80,Inf)</span></span>
<span><span class="co">#&gt; [0,5)    0.16458757 0.11988506 0.08281025 0.06268887 0.04010743</span></span>
<span><span class="co">#&gt; [5,10)   0.15312433 0.14144768 0.10752816 0.07909526 0.05338108</span></span>
<span><span class="co">#&gt; [10,15)  0.11304961 0.12267679 0.11491077 0.09016617 0.05735142</span></span>
<span><span class="co">#&gt; [15,20)  0.09281177 0.08454320 0.09112384 0.08747322 0.05856830</span></span>
<span><span class="co">#&gt; [20,25)  0.11769044 0.06775402 0.06277506 0.07189612 0.06366980</span></span>
<span><span class="co">#&gt; [25,30)  0.19590271 0.08745415 0.05317982 0.05414128 0.06434031</span></span>
<span><span class="co">#&gt; [30,35)  0.25831507 0.15160402 0.07218372 0.04776979 0.05281614</span></span>
<span><span class="co">#&gt; [35,40)  0.20214433 0.21451044 0.13132809 0.06541029 0.04186919</span></span>
<span><span class="co">#&gt; [40,45)  0.10508685 0.17809841 0.19204680 0.12093482 0.04911215</span></span>
<span><span class="co">#&gt; [45,50)  0.06623503 0.09771948 0.16747150 0.18977593 0.09362128</span></span>
<span><span class="co">#&gt; [50,55)  0.09769375 0.06327118 0.09630363 0.17833898 0.17250817</span></span>
<span><span class="co">#&gt; [55,60)  0.26932574 0.09669986 0.06592301 0.10818534 0.20528872</span></span>
<span><span class="co">#&gt; [60,65)  0.46952709 0.26582005 0.09957592 0.07061294 0.14341967</span></span>
<span><span class="co">#&gt; [65,70)  0.22497344 0.43027814 0.24501515 0.09086061 0.07270457</span></span>
<span><span class="co">#&gt; [70,75)  0.06479746 0.18838793 0.34734890 0.18950830 0.05470861</span></span>
<span><span class="co">#&gt; [75,80)  0.03276461 0.04981417 0.13512800 0.23649619 0.08450442</span></span>
<span><span class="co">#&gt; [80,Inf) 0.08169591 0.04893390 0.04788987 0.10374097 0.16430280</span></span></code></pre></div>
<p>By full POLYMOD data, we mean these data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polymod_setting</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_polymod_setting_data.html">get_polymod_setting_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">polymod_population</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">polymod_setting</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Setting Data</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">A list of </span><span style="color: #0000BB; font-style: italic;">&lt;data.frame&gt;</span><span style="font-style: italic;">s containing the number of contacts between ages in each</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">setting.</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">There are 86 age breaks, ranging 0-90 years, with an irregular year interval,</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">(on average, 1.05 years)</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">home</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">work</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">school</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">other</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Access each <span style="color: #0000BB;">&lt;data.frame&gt;</span> with `x$name`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> e.g., `x$home`</span></span>
<span><span class="va">polymod_setting</span><span class="op">$</span><span class="va">home</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8,787 × 5</span></span></span>
<span><span class="co">#&gt;    setting age_from age_to contacts participants</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> home           0      0       10           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> home           0      1        7           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> home           0      2       11           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> home           0      3       15           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> home           0      4       11           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> home           0      5        6           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> home           0      6        9           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> home           0      7        9           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> home           0      8        6           92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> home           0      9        6           92</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8,777 more rows</span></span></span>
<span><span class="va">polymod_population</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 21 × 2</span> <span style="color: #BB0000;">(conmat_population)</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555;">- age: </span><span style="color: #555555; font-weight: bold;">lower.age.limit</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555;">- population: </span><span style="color: #555555; font-weight: bold;">population</span></span></span>
<span><span class="co">#&gt;    lower.age.limit population</span></span>
<span><span class="co">#&gt;              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>               0   1<span style="text-decoration: underline;">898</span>966.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>               5   2<span style="text-decoration: underline;">017</span>632.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>              10   2<span style="text-decoration: underline;">192</span>410.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>              15   2<span style="text-decoration: underline;">369</span>985.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>              20   2<span style="text-decoration: underline;">467</span>873.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>              25   2<span style="text-decoration: underline;">484</span>327.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>              30   2<span style="text-decoration: underline;">649</span>826.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>              35   3<span style="text-decoration: underline;">043</span>704.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>              40   3<span style="text-decoration: underline;">117</span>812.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>              45   2<span style="text-decoration: underline;">879</span>510.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre></div>
<p>The <code><a href="../reference/extrapolate_polymod.html">extrapolate_polymod()</a></code> function does the
following:</p>
<ul>
<li>Uses an already fit model (<code>polymod_setting_models</code>) of
the contact rate to the full POLYMOD data above</li>
<li>Predicts it to the provided fairfield population data</li>
</ul>
<p>It also has options to predict to specified age brackets, defaulting
to 5 year age groups up to 75, then 75 and older.</p>
<p>This object, <code>synthetic_fairfield_5y</code>, contains a matrix
of predictions for each of the settings, home, work, school, other, and
all settings, which is summarised when you print the object to the
console:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">synthetic_fairfield_5y</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Setting Prediction Matrices</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">A list of matrices containing the model predicted contact rate between ages in</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">each setting.</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">There are 17 age breaks, ranging 0-80+ years, with a regular 5 year interval</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">home</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">work</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">school</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">other</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">all</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Access each <span style="color: #0000BB;">&lt;matrix&gt;</span> with `x$name`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> e.g., `x$home`</span></span></code></pre></div>
<p>You can see more detail by using <code>str</code> if you like:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">synthetic_fairfield_5y</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ home  : 'conmat_age_matrix' num [1:17, 1:17] 0.523 0.458 0.241 0.172 0.264 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;  $ work  : 'conmat_age_matrix' num [1:17, 1:17] 0.00287 0.00482 0.00379 0.00422 0.00911 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;  $ school: 'conmat_age_matrix' num [1:17, 1:17] 0.9176 0.3803 0.0677 0.0361 0.0506 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;  $ other : 'conmat_age_matrix' num [1:17, 1:17] 0.769 0.424 0.162 0.103 0.133 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;  $ all   : 'conmat_age_matrix' num [1:17, 1:17] 2.213 1.268 0.474 0.316 0.457 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "conmat_setting_prediction_matrix" "list"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="generating-a-next-generation-matrix">Generating a Next Generation Matrix<a class="anchor" aria-label="anchor" href="#generating-a-next-generation-matrix"></a>
</h3>
<p>Once infected, a person can transmit an infectious disease to
another, creating generations of infected individuals. We can define a
matrix describing the number of newly infected individuals in given
categories, such as age, for consecutive generations. This matrix is
called a “next generation matrix” (NGM).</p>
<p>We can generate an NGM using the population data</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fairfield_ngm_age_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_ngm.html">generate_ngm</a></span><span class="op">(</span></span>
<span>  <span class="va">fairfield</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span>,</span>
<span>  R_target <span class="op">=</span> <span class="fl">1.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Or if you’ve already got the fitted settings contact matrices, then
you can pass that to <code>generate_ngm</code> instead:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fairfield_ngm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_ngm.html">generate_ngm</a></span><span class="op">(</span></span>
<span>  <span class="va">synthetic_fairfield_5y</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span>,</span>
<span>  R_target <span class="op">=</span> <span class="fl">1.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>However, note in these cases the age breaks specified in
<code>generate_ngm</code> must be the same as the age breaks specified
in the synthetic contact matrix, otherwise it will error as it is trying
to multiple incompatible matrices.</p>
<p>You can also specify your own transmission matrix, like so:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using our own transmission matrix</span></span>
<span><span class="va">new_transmission_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_setting_transmission_matrices.html">get_setting_transmission_matrices</a></span><span class="op">(</span></span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span>,</span>
<span>  <span class="co"># is normally 0.5</span></span>
<span>  asymptomatic_relative_infectiousness <span class="op">=</span> <span class="fl">0.75</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_transmission_matrix</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Transmission Probability Matrices</span> <span style="color: #00BBBB;">───────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">A list of matrices, each </span><span style="color: #0000BB; font-style: italic;">&lt;matrix&gt;</span><span style="font-style: italic;"> containing the </span><span style="font-weight: bold; font-style: italic;">relative</span><span style="font-style: italic;"> probability of</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">individuals in a given age group infecting an individual in another age group,</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">for that setting.</span></span></span>
<span><span class="co">#&gt; Warning in min(x, na.rm = na.rm): no non-missing arguments to min; returning</span></span>
<span><span class="co">#&gt; Inf</span></span>
<span><span class="co">#&gt; Warning in max(x, na.rm = na.rm): no non-missing arguments to max; returning</span></span>
<span><span class="co">#&gt; -Inf</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">There are -1 age breaks, ranging Inf--Inf years,</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">home</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">school</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">work</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">other</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Access each <span style="color: #0000BB;">&lt;matrix&gt;</span> with `x$name`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> e.g., `x$home`</span></span>
<span></span>
<span><span class="va">fairfield_ngm_0_80_new_tmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_ngm.html">generate_ngm</a></span><span class="op">(</span></span>
<span>  <span class="va">synthetic_fairfield_5y</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span>,</span>
<span>  R_target <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  setting_transmission_matrix <span class="op">=</span> <span class="va">new_transmission_matrix</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can also generate an NGM for Australian specific data like so,
which refits and extrapolates the data based on the Australian state or
LGA provided.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ngm_fairfield</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_ngm_oz.html">generate_ngm_oz</a></span><span class="op">(</span></span>
<span>  lga_name <span class="op">=</span> <span class="st">"Fairfield (C)"</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span>,</span>
<span>  R_target <span class="op">=</span> <span class="fl">1.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The output of this is a matrix for each of the settings, where each
value is the number of newly infected individuals</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ngm_fairfield</span><span class="op">$</span><span class="va">home</span></span>
<span><span class="co">#&gt;                [0,5)      [5,10)     [10,15)     [15,20)     [20,25)</span></span>
<span><span class="co">#&gt; [0,5)    0.049751622 0.040326077 0.019485789 0.013032638 0.019030739</span></span>
<span><span class="co">#&gt; [5,10)   0.053182053 0.084215832 0.053700622 0.019381429 0.012942333</span></span>
<span><span class="co">#&gt; [10,15)  0.032909393 0.068774302 0.109139465 0.056079336 0.019549859</span></span>
<span><span class="co">#&gt; [15,20)  0.028790666 0.032460863 0.073315802 0.117427939 0.060603892</span></span>
<span><span class="co">#&gt; [20,25)  0.063842451 0.032889089 0.038735483 0.091811642 0.148219412</span></span>
<span><span class="co">#&gt; [25,30)  0.147016557 0.068948382 0.035019970 0.042294436 0.097881870</span></span>
<span><span class="co">#&gt; [30,35)  0.196488679 0.148690329 0.067251439 0.034865505 0.041412101</span></span>
<span><span class="co">#&gt; [35,40)  0.135481077 0.179327721 0.129705737 0.059865238 0.030997797</span></span>
<span><span class="co">#&gt; [40,45)  0.067287445 0.111541015 0.141750795 0.105287866 0.048607571</span></span>
<span><span class="co">#&gt; [45,50)  0.045226217 0.056406176 0.090252702 0.118578944 0.087895934</span></span>
<span><span class="co">#&gt; [50,55)  0.048930483 0.039463890 0.047626875 0.078358626 0.101815289</span></span>
<span><span class="co">#&gt; [55,60)  0.059234212 0.042272398 0.032905479 0.040161433 0.065014732</span></span>
<span><span class="co">#&gt; [60,65)  0.053998421 0.046410582 0.031447534 0.024068519 0.029141592</span></span>
<span><span class="co">#&gt; [65,70)  0.032420299 0.035341406 0.028135855 0.018076520 0.013830850</span></span>
<span><span class="co">#&gt; [70,75)  0.015696372 0.018837332 0.018487126 0.013668130 0.008986538</span></span>
<span><span class="co">#&gt; [75,80)  0.007929359 0.009248453 0.009684949 0.008760233 0.006870408</span></span>
<span><span class="co">#&gt; [80,Inf) 0.006067669 0.007465989 0.007369258 0.007016746 0.007277967</span></span>
<span><span class="co">#&gt;              [25,30)     [30,35)     [35,40)     [40,45)    [45,50)    [50,55)</span></span>
<span><span class="co">#&gt; [0,5)    0.037037984 0.052017962 0.040748064 0.022613399 0.01540295 0.01638965</span></span>
<span><span class="co">#&gt; [5,10)   0.022947552 0.052024273 0.071292417 0.049551148 0.02539756 0.01748183</span></span>
<span><span class="co">#&gt; [10,15)  0.014962915 0.030222466 0.066239718 0.080892026 0.05220899 0.02711564</span></span>
<span><span class="co">#&gt; [15,20)  0.023644094 0.020507478 0.040025864 0.078686270 0.08986290 0.05847245</span></span>
<span><span class="co">#&gt; [20,25)  0.082916049 0.036933255 0.031451595 0.055192578 0.10131744 0.11572157</span></span>
<span><span class="co">#&gt; [25,30)  0.157610276 0.097203461 0.042955348 0.033195670 0.05510437 0.10235283</span></span>
<span><span class="co">#&gt; [30,35)  0.092285882 0.150135559 0.091175135 0.036930820 0.02744534 0.04732850</span></span>
<span><span class="co">#&gt; [35,40)  0.035821264 0.080058989 0.130470394 0.075347429 0.02992059 0.02359359</span></span>
<span><span class="co">#&gt; [40,45)  0.024711357 0.028931907 0.067213890 0.114030145 0.06739870 0.02874215</span></span>
<span><span class="co">#&gt; [45,50)  0.040368829 0.021149864 0.026254330 0.066307691 0.12104035 0.07660174</span></span>
<span><span class="co">#&gt; [50,55)  0.075957903 0.036930301 0.020965555 0.028648859 0.07762725 0.14829186</span></span>
<span><span class="co">#&gt; [55,60)  0.086121192 0.069661729 0.037113983 0.022941742 0.03303561 0.09176693</span></span>
<span><span class="co">#&gt; [60,65)  0.049419029 0.072771512 0.064340245 0.035946910 0.02262744 0.03345673</span></span>
<span><span class="co">#&gt; [65,70)  0.018185349 0.035200607 0.056265148 0.050196141 0.02750097 0.01784567</span></span>
<span><span class="co">#&gt; [70,75)  0.007751960 0.011744058 0.024127398 0.037892832 0.03297696 0.01899083</span></span>
<span><span class="co">#&gt; [75,80)  0.005266989 0.005185488 0.008015839 0.015911748 0.02491071 0.02343304</span></span>
<span><span class="co">#&gt; [80,Inf) 0.007486513 0.006856862 0.006135944 0.007726659 0.01469283 0.02709625</span></span>
<span><span class="co">#&gt;             [55,60)    [60,65)    [65,70)    [70,75)     [75,80)    [80,Inf)</span></span>
<span><span class="co">#&gt; [0,5)    0.01981747 0.01943735 0.01461158 0.01029844 0.007870232 0.005050639</span></span>
<span><span class="co">#&gt; [5,10)   0.01871236 0.02211669 0.02109088 0.01636300 0.012151851 0.008226539</span></span>
<span><span class="co">#&gt; [10,15)  0.01873051 0.01928354 0.02160942 0.02066219 0.016370247 0.010444993</span></span>
<span><span class="co">#&gt; [15,20)  0.02998075 0.01937018 0.01823048 0.02006491 0.019451316 0.013065095</span></span>
<span><span class="co">#&gt; [20,25)  0.07404131 0.03585596 0.02136306 0.02023430 0.023415939 0.020806210</span></span>
<span><span class="co">#&gt; [25,30)  0.11643632 0.07232439 0.03346576 0.02082582 0.021434648 0.025562252</span></span>
<span><span class="co">#&gt; [30,35)  0.08961793 0.10141111 0.06173339 0.03009494 0.020139311 0.022347072</span></span>
<span><span class="co">#&gt; [35,40)  0.04191584 0.07868841 0.08660178 0.05428119 0.027337520 0.017561639</span></span>
<span><span class="co">#&gt; [40,45)  0.02308379 0.03913356 0.06875047 0.07587258 0.048303122 0.019685451</span></span>
<span><span class="co">#&gt; [45,50)  0.03268193 0.02420769 0.03701508 0.06491465 0.074363576 0.036814324</span></span>
<span><span class="co">#&gt; [50,55)  0.09198726 0.03626280 0.02434448 0.03792181 0.070995970 0.068917257</span></span>
<span><span class="co">#&gt; [55,60)  0.17397838 0.10354858 0.03855302 0.02690534 0.044644614 0.085018974</span></span>
<span><span class="co">#&gt; [60,65)  0.09575775 0.18753298 0.11014691 0.04225231 0.030300572 0.061765927</span></span>
<span><span class="co">#&gt; [65,70)  0.02830701 0.08737373 0.17330705 0.10103337 0.037884774 0.030423337</span></span>
<span><span class="co">#&gt; [70,75)  0.01347933 0.02283150 0.06877202 0.12972522 0.071540580 0.020724591</span></span>
<span><span class="co">#&gt; [75,80)  0.01473126 0.01077391 0.01696122 0.04705206 0.083222204 0.029838223</span></span>
<span><span class="co">#&gt; [80,Inf) 0.03340941 0.02614652 0.01621339 0.01622475 0.035517099 0.056441839</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">ngm_fairfield</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ home  : 'conmat_age_matrix' num [1:17, 1:17] 0.0498 0.0532 0.0329 0.0288 0.0638 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;  $ school: 'conmat_age_matrix' num [1:17, 1:17] 0.02341 0.01177 0.00246 0.00158 0.00313 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;  $ work  : 'conmat_age_matrix' num [1:17, 1:17] 7.31e-05 1.49e-04 1.37e-04 1.85e-04 5.64e-04 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;  $ other : 'conmat_age_matrix' num [1:17, 1:17] 0.01962 0.01314 0.00588 0.00451 0.00824 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;  $ all   : 'conmat_age_matrix' num [1:17, 1:17] 0.0929 0.0782 0.0414 0.0351 0.0758 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:17] "[0,5)" "[5,10)" "[10,15)" "[15,20)" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "raw_eigenvalue")= num 3.08</span></span>
<span><span class="co">#&gt;  - attr(*, "scaling")= num 0.487</span></span>
<span><span class="co">#&gt;  - attr(*, "age_breaks")= num [1:18] 0 5 10 15 20 25 30 35 40 45 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "ngm_setting_matrix" "list"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="applying-vaccination-rates">Applying Vaccination Rates<a class="anchor" aria-label="anchor" href="#applying-vaccination-rates"></a>
</h3>
<p>It is important to understand the effect of vaccination on the next
generation of infections. We can use <code><a href="../reference/apply_vaccination.html">apply_vaccination()</a></code> to
return the percentage reduction in acquisition and transmission in each
age group.</p>
<p>It takes two key arguments:</p>
<ol style="list-style-type: decimal">
<li>The next generation matrix</li>
<li>The vaccination effect data</li>
</ol>
<p>The vaccination effect could look like the following:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vaccination_effect_example_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 × 4</span></span></span>
<span><span class="co">#&gt;    age_band coverage acquisition transmission</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 0-4         0           0            0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 5-11        0.782       0.583        0.254</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 12-15       0.997       0.631        0.295</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 16-19       0.965       0.786        0.469</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 20-24       0.861       0.774        0.453</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 25-29       0.997       0.778        0.458</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 30-34       0.998       0.803        0.493</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 35-39       0.998       0.829        0.533</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 40-44       0.999       0.841        0.551</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 45-49       0.993       0.847        0.562</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 50-54       0.999       0.857        0.579</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 55-59       0.996       0.864        0.591</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 60-64       0.998       0.858        0.581</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 65-69       0.999       0.864        0.591</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 70-74       0.999       0.867        0.597</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 75-79       0.999       0.866        0.595</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 80+         0.999       0.844        0.556</span></span></code></pre></div>
<p>Each row contains information, for each age band:</p>
<ul>
<li>Coverage % vaccinated</li>
<li>Acquisition - probability of acquiring COVID</li>
<li>Transmission - the probability of transmission</li>
</ul>
<p>Then you need to specify the columns in the vaccination effect data
frame related to coverage, acquisition, and transmission.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply vaccination effect to next generation matrices</span></span>
<span><span class="va">ngm_nsw_vacc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_vaccination.html">apply_vaccination</a></span><span class="op">(</span></span>
<span>  ngm <span class="op">=</span> <span class="va">ngm_fairfield</span>,</span>
<span>  data <span class="op">=</span> <span class="va">vaccination_effect_example_data</span>,</span>
<span>  coverage_col <span class="op">=</span> <span class="va">coverage</span>,</span>
<span>  acquisition_col <span class="op">=</span> <span class="va">acquisition</span>,</span>
<span>  transmission_col <span class="op">=</span> <span class="va">transmission</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ngm_nsw_vacc</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Vaccination Setting Matrices</span> <span style="color: #00BBBB;">────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">A list of matrices, each </span><span style="color: #0000BB; font-style: italic;">&lt;matrix&gt;</span><span style="font-style: italic;"> containing the </span><span style="font-weight: bold; font-style: italic;">adjusted</span><span style="font-style: italic;"> number of newly</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">infected individuals for age groups. These numbers have been adjusted based on</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">proposed vaccination rates in age groups</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">There are 17 age breaks, ranging 0-80+ years, with a regular 5 year interval</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">home</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">school</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">work</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">other</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">all</span>: a 17x17 <span style="color: #0000BB;">&lt;matrix&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Access each <span style="color: #0000BB;">&lt;matrix&gt;</span> with `x$name`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> e.g., `x$home`</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="fitting-a-new-model-with-asymmetric-terms">Fitting a new model with asymmetric terms<a class="anchor" aria-label="anchor" href="#fitting-a-new-model-with-asymmetric-terms"></a>
</h2>
<p>In the examples so far we have focussed on using
<code>extrapolate_polymod</code> to fit the contact model - this is very
useful because it doesn’t involve many lines of code to fit:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fairfield</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/abs_age_data.html">abs_age_lga</a></span><span class="op">(</span><span class="st">"Fairfield (C)"</span><span class="op">)</span></span>
<span><span class="va">age_breaks_0_80_plus</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">synthetic_fairfield_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extrapolate_polymod.html">extrapolate_polymod</a></span><span class="op">(</span></span>
<span>  population <span class="op">=</span> <span class="va">fairfield</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>It also fits quite quickly, since it uses a pre-computed model,
<code>polymod_setting_models</code>, (See
<code><a href="../reference/polymod_setting_models.html">?polymod_setting_models</a></code> for more details).</p>
<p>Under the hood of <code>extrapolate_polymod</code>, this uses this
already fit model for each setting (home, work, school, other), and then
predicts using that model, and the provided data, to predict the new
contact rates.</p>
<p>So the process is:</p>
<ol style="list-style-type: decimal">
<li>Create a model that predicts contact rate for each setting</li>
<li>Predict to a new population using that model</li>
</ol>
<p>Let’s show each step and unpack them.</p>
<p>First let’s create a model that predicts contact rate for each
setting:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polymod_setting_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_polymod_setting_data.html">get_polymod_setting_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">polymod_population</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">contact_setting_model_not_sym</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit_setting_contacts.html">fit_setting_contacts</a></span><span class="op">(</span></span>
<span>  contact_data_list <span class="op">=</span> <span class="va">polymod_setting_data</span>,</span>
<span>  population <span class="op">=</span> <span class="va">polymod_population</span>,</span>
<span>  symmetrical <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Here, we first get the polymod setting data
(<code>polymod_setting_data</code>), and the polymod population
(<code>polymod_population</code>), to create a model for each setting.
These data look like this, if you are interested.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polymod_setting_data</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Setting Data</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">A list of </span><span style="color: #0000BB; font-style: italic;">&lt;data.frame&gt;</span><span style="font-style: italic;">s containing the number of contacts between ages in each</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">setting.</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">There are 86 age breaks, ranging 0-90 years, with an irregular year interval,</span></span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">(on average, 1.05 years)</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">home</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">work</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">school</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; • <span style="font-weight: bold;">other</span>: a 8,787x5 <span style="color: #0000BB;">&lt;data.frame&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Access each <span style="color: #0000BB;">&lt;data.frame&gt;</span> with `x$name`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> e.g., `x$home`</span></span>
<span><span class="va">polymod_population</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 21 × 2</span> <span style="color: #BB0000;">(conmat_population)</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555;">- age: </span><span style="color: #555555; font-weight: bold;">lower.age.limit</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555;">- population: </span><span style="color: #555555; font-weight: bold;">population</span></span></span>
<span><span class="co">#&gt;    lower.age.limit population</span></span>
<span><span class="co">#&gt;              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>               0   1<span style="text-decoration: underline;">898</span>966.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>               5   2<span style="text-decoration: underline;">017</span>632.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>              10   2<span style="text-decoration: underline;">192</span>410.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>              15   2<span style="text-decoration: underline;">369</span>985.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>              20   2<span style="text-decoration: underline;">467</span>873.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>              25   2<span style="text-decoration: underline;">484</span>327.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>              30   2<span style="text-decoration: underline;">649</span>826.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>              35   3<span style="text-decoration: underline;">043</span>704.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>              40   3<span style="text-decoration: underline;">117</span>812.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>              45   2<span style="text-decoration: underline;">879</span>510.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre></div>
<p>We also specify the <code>symmetrical = FALSE</code> option - by
default this is TRUE. Briefly, this changes some of the terms we use in
creating the model, to use terms that aren’t strictly symmetric.</p>
<p>Now that we’ve got our model, we can predict to our fairfield data,
like so:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fairfield_hh</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_abs_per_capita_household_size.html">get_abs_per_capita_household_size</a></span><span class="op">(</span>lga <span class="op">=</span> <span class="st">"Fairfield (C)"</span><span class="op">)</span></span>
<span><span class="va">fairfield_hh</span></span>
<span><span class="co">#&gt; [1] 4.199372</span></span>
<span><span class="va">contact_model_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_setting_contacts.html">predict_setting_contacts</a></span><span class="op">(</span></span>
<span>  population <span class="op">=</span> <span class="va">fairfield</span>,</span>
<span>  contact_model <span class="op">=</span> <span class="va">contact_setting_model_not_sym</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span>,</span>
<span>  per_capita_household_size <span class="op">=</span> <span class="va">fairfield_hh</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>population</code> is our population to predict to</li>
<li>
<code>contact_model</code> is our contact rate model for each
setting</li>
<li>
<code>age_breaks</code> are our age breaks to predict to</li>
<li>
<code>per_capita_household_size</code> is the household size for
that population, in our case we have a helper function,
<code>get_abs_per_capita_household_size</code> which works for each LGA
in Australia.</li>
</ul>
<p>alternatively, you can use the <code>estimate_setting_contacts</code>
function to do a similar task:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contact_model_pred_est</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_setting_contacts.html">estimate_setting_contacts</a></span><span class="op">(</span></span>
<span>  contact_data_list <span class="op">=</span> <span class="va">polymod_setting_data</span>,</span>
<span>  survey_population <span class="op">=</span> <span class="va">polymod_population</span>,</span>
<span>  prediction_population <span class="op">=</span> <span class="va">fairfield</span>,</span>
<span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80_plus</span>,</span>
<span>  per_capita_household_size <span class="op">=</span> <span class="va">fairfield_hh</span>,</span>
<span>  symmetrical <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This is a bit briefer than the two step process, and might be
preferable to creating a separate model.</p>
<!-- ## Comparing R0 before and post vaccination rates -->
<!-- ## A note on transmission matrices -->
<!-- The initial phase of COVID-19 pandemic saw a significant age dependence in the distribution of confirmed cases with fewer confirmed cases among children. This might have been a result of younger ages being less susceptible to infection and/or less likely to exhibit clinical signs when infected [ [Davies et al](https://www.nature.com/articles/s41591-020-0962-9)] . A population's clinical fraction and age-varying susceptibility to infection both profoundly influence the likelihood that an infectious agent would spread there. This likelihood that an infectious agent would spread from an infected source to a new susceptible host and infect the host is known as transmission probability. -->
<!-- The age and setting specific relative per-contact transmission probability matrices when combined with contact matrices could be used to produce the setting-specific relative next generation matrices (NGMs) which is used to obtain the distribution of numbers of new cases in each generation of infection from any arbitrary initial number of introduced infections. Conmat creates these age and setting specific relative per-contact transmission probability matrices through `get_setting_transmission_matrices()` by making use of clinical fraction and relative susceptibility parameters from Davies et al available through `davies_age_extended`.  -->
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nicholas Tierney, <a href="https://www.telethonkids.org.au/contact-us/our-people/g/nick-golding/" class="external-link">Nick Golding</a>, <a href="https://aarathybabu.netlify.app/" class="external-link">Aarathy Babu</a>, Michael Lydeamore.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
