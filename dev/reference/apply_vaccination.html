<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Applies the effect of vaccination on the next generation of
infections, to understand and describe the reduction of acquisition and
transmission in each age group."><title>Apply vaccination effects to next generation contact matrices — apply_vaccination • conmat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply vaccination effects to next generation contact matrices — apply_vaccination"><meta property="og:description" content="Applies the effect of vaccination on the next generation of
infections, to understand and describe the reduction of acquisition and
transmission in each age group."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">conmat</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/conmat-population.html">Conmat Population Data</a>
    <a class="dropdown-item" href="../articles/data-sources.html">Data Sources</a>
    <a class="dropdown-item" href="../articles/example-pipeline.html">Example Pipeline</a>
    <a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/other-data-sources.html">Using other data sources</a>
    <a class="dropdown-item" href="../articles/parallel-computing.html">parallel-computing</a>
    <a class="dropdown-item" href="../articles/visualising-conmat.html">Visualisation gallery</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Apply vaccination effects to next generation contact matrices</h1>
      
      <div class="d-none name"><code>apply_vaccination.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Applies the effect of vaccination on the next generation of
infections, to understand and describe the reduction of acquisition and
transmission in each age group.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">apply_vaccination</span><span class="op">(</span><span class="va">ngm</span>, <span class="va">data</span>, <span class="va">coverage_col</span>, <span class="va">acquisition_col</span>, <span class="va">transmission_col</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>ngm</dt>
<dd><p>next generation matrices. See <code><a href="generate_ngm.html">generate_ngm()</a></code> for creating next
generation matrices of a state or a local government area for specific age
groups</p></dd>


<dt>data</dt>
<dd><p>data frame with location specific information on vaccine
coverage, efficacy of acquisition/susceptibility and efficacy of
transmission/infectiousness for the ordered age groups from lowest to
highest of the next generation matrix</p></dd>


<dt>coverage_col</dt>
<dd><p>bare variable name for the column with information on
vaccine coverage by age groups</p></dd>


<dt>acquisition_col</dt>
<dd><p>bare variable name for the column with information
on efficacy of acquisition</p></dd>


<dt>transmission_col</dt>
<dd><p>bare variable name for the column with information
on efficacy of transmission</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list of contact matrices, one for each setting with reduction in
transmission matching the next generation matrices</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Vaccination improves a person's immunity from a disease. When a
sizeable section of the population receives vaccinations or when vaccine
coverage is sufficient enough, the likelihood that the unvaccinated
population will contract the disease is decreased. This helps to slow
infectious disease spread as well as lessen its severity. For this reason,
it is important to understand how much of a reduction in probability of
acquisition (the likelihood that an individual will contract the disease),
and probability of transmission (the likelihood that an individual will
spread the disease after contracting it), has occurred as an the effect of
vaccination, in other words the effect of vaccination on the next
generation of infections.</p>
<p><code>apply_vaccination</code> returns the percentage reduction in acquisition and
transmission in each age group. It does this by taking the outer product
of these reductions in acquisition and transmission by age group, creating
a transmission reduction matrix. The next generation matrices with the
vaccination effects applied are then produced using the obtained
transmission reduction matrix and the next generation matrices passed to
the function as an argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># examples take 20 second to run so skipping</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># example data frame with vaccine coverage, acquisition and transmission</span></span></span>
<span class="r-in"><span><span class="co"># efficacy of different age groups</span></span></span>
<span class="r-in"><span><span class="va">vaccination_effect_example_data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate next generation matrices</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">perth</span> <span class="op">&lt;-</span> <span class="fu"><a href="abs_age_data.html">abs_age_lga</a></span><span class="op">(</span><span class="st">"Perth (C)"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">perth_hh</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_abs_per_capita_household_size.html">get_abs_per_capita_household_size</a></span><span class="op">(</span>lga <span class="op">=</span> <span class="st">"Perth (C)"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">age_breaks_0_80</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># refit the model - note that the default if age_breaks isn't specified is</span></span></span>
<span class="r-in"><span><span class="co"># 0 to 75</span></span></span>
<span class="r-in"><span><span class="va">perth_contact_0_80</span> <span class="op">&lt;-</span> <span class="fu"><a href="extrapolate_polymod.html">extrapolate_polymod</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">perth</span>,</span></span>
<span class="r-in"><span>  per_capita_household_size <span class="op">=</span> <span class="va">perth_hh</span>,</span></span>
<span class="r-in"><span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">perth_ngm_0_80</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_ngm.html">generate_ngm</a></span><span class="op">(</span><span class="va">perth_contact_0_80</span>,</span></span>
<span class="r-in"><span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80</span>,</span></span>
<span class="r-in"><span>  per_capita_household_size <span class="op">=</span> <span class="va">perth_hh</span>,</span></span>
<span class="r-in"><span>  R_target <span class="op">=</span> <span class="fl">1.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># In the old way we used to be able to pass age_breaks_0_80 along</span></span></span>
<span class="r-in"><span><span class="fu"><a href="generate_ngm_oz.html">generate_ngm_oz</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  lga_name <span class="op">=</span> <span class="st">"Perth (C)"</span>,</span></span>
<span class="r-in"><span>  age_breaks <span class="op">=</span> <span class="va">age_breaks_0_80</span>,</span></span>
<span class="r-in"><span>  R_target <span class="op">=</span> <span class="fl">1.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># another way to do this using the previous method for generating NGMs</span></span></span>
<span class="r-in"><span><span class="co"># The number of age breaks must match the vaccination effect data</span></span></span>
<span class="r-in"><span><span class="va">ngm_nsw</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_ngm_oz.html">generate_ngm_oz</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  state_name <span class="op">=</span> <span class="st">"NSW"</span>,</span></span>
<span class="r-in"><span>  age_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">80</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  R_target <span class="op">=</span> <span class="fl">1.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply vaccination effect to next generation matrices</span></span></span>
<span class="r-in"><span><span class="va">ngm_nsw_vacc</span> <span class="op">&lt;-</span> <span class="fu">apply_vaccination</span><span class="op">(</span></span></span>
<span class="r-in"><span>  ngm <span class="op">=</span> <span class="va">ngm_nsw</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">vaccination_effect_example_data</span>,</span></span>
<span class="r-in"><span>  coverage_col <span class="op">=</span> <span class="va">coverage</span>,</span></span>
<span class="r-in"><span>  acquisition_col <span class="op">=</span> <span class="va">acquisition</span>,</span></span>
<span class="r-in"><span>  transmission_col <span class="op">=</span> <span class="va">transmission</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nicholas Tierney, <a href="https://www.telethonkids.org.au/contact-us/our-people/g/nick-golding/" class="external-link">Nick Golding</a>, <a href="https://aarathybabu.netlify.app/" class="external-link">Aarathy Babu</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

