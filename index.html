<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Builds contact matrices using GAMs and population data • conmat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Builds contact matrices using GAMs and population data">
<meta property="og:description" content="Builds contact matrices using GAMs and population data. This package 
  incorporates data that is copyright Commonwealth of Australia (Australian 
  Electoral Commission and Australian Bureau of Statistics) 2020.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">conmat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/getting-started.html">Getting Started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="conmat" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#conmat" class="anchor"></a>conmat</h1></div>
<!-- badges: start -->

<p>The goal of conmat is to provide methods for producing contact matrices.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"conmat"</span>, repos <span class="op">=</span> <span class="st">"https://njtierney.r-universe.dev"</span><span class="op">)</span></code></pre></div>
<p>Or alternatively you can use <code>remotes</code> (although I recommend using the above code)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"njtierney/conmat"</span><span class="op">)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>We can extract out the ABS age population data using <code>abs_age_lga</code> like so:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">conmat</span><span class="op">)</span>
<span class="va">sydney_age_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/abs_age_lga.html">abs_age_lga</a></span><span class="op">(</span><span class="st">"Sydney (C)"</span><span class="op">)</span>
<span class="va">sydney_age_pop</span>
<span class="co">#&gt; # A tibble: 18 × 4</span>
<span class="co">#&gt;    lga        lower.age.limit  year population</span>
<span class="co">#&gt;    &lt;chr&gt;                &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Sydney (C)               0  2020       9109</span>
<span class="co">#&gt;  2 Sydney (C)               5  2020       5034</span>
<span class="co">#&gt;  3 Sydney (C)              10  2020       3718</span>
<span class="co">#&gt;  4 Sydney (C)              15  2020       7492</span>
<span class="co">#&gt;  5 Sydney (C)              20  2020      31981</span>
<span class="co">#&gt;  6 Sydney (C)              25  2020      45686</span>
<span class="co">#&gt;  7 Sydney (C)              30  2020      38333</span>
<span class="co">#&gt;  8 Sydney (C)              35  2020      25550</span>
<span class="co">#&gt;  9 Sydney (C)              40  2020      15768</span>
<span class="co">#&gt; 10 Sydney (C)              45  2020      12843</span>
<span class="co">#&gt; 11 Sydney (C)              50  2020      10964</span>
<span class="co">#&gt; 12 Sydney (C)              55  2020      10532</span>
<span class="co">#&gt; 13 Sydney (C)              60  2020       8950</span>
<span class="co">#&gt; 14 Sydney (C)              65  2020       7377</span>
<span class="co">#&gt; 15 Sydney (C)              70  2020       6308</span>
<span class="co">#&gt; 16 Sydney (C)              75  2020       4002</span>
<span class="co">#&gt; 17 Sydney (C)              80  2020       2583</span>
<span class="co">#&gt; 18 Sydney (C)              85  2020       2506</span></code></pre></div>
<p>Note that you need to use the exact LGA name - you can look up LGA names in the data set <code>abs_lga_lookup</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_lga_lookup</span>
<span class="co">#&gt; # A tibble: 545 × 3</span>
<span class="co">#&gt;    state lga_code lga                  </span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                </span>
<span class="co">#&gt;  1 NSW      10050 Albury (C)           </span>
<span class="co">#&gt;  2 NSW      10180 Armidale Regional (A)</span>
<span class="co">#&gt;  3 NSW      10250 Ballina (A)          </span>
<span class="co">#&gt;  4 NSW      10300 Balranald (A)        </span>
<span class="co">#&gt;  5 NSW      10470 Bathurst Regional (A)</span>
<span class="co">#&gt;  6 NSW      10500 Bayside (A)          </span>
<span class="co">#&gt;  7 NSW      10550 Bega Valley (A)      </span>
<span class="co">#&gt;  8 NSW      10600 Bellingen (A)        </span>
<span class="co">#&gt;  9 NSW      10650 Berrigan (A)         </span>
<span class="co">#&gt; 10 NSW      10750 Blacktown (C)        </span>
<span class="co">#&gt; # … with 535 more rows</span></code></pre></div>
<p>We can then extrapolate this data from polymod and plot a matrix, below:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">synthetic_settings_5y_sydney</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/extrapolate_polymod.html">extrapolate_polymod</a></span><span class="op">(</span>
  population <span class="op">=</span> <span class="va">sydney_age_pop</span>,
  age_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">85</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">synthetic_settings_5y_sydney</span>
<span class="co">#&gt; $home</span>
<span class="co">#&gt;               [0,5)     [5,10)    [10,15)   [15,20)    [20,25)    [25,30)</span>
<span class="co">#&gt; [0,5)    0.39616359 0.29418591 0.18390825 0.2024392 0.34143756 0.59890640</span>
<span class="co">#&gt; [5,10)   0.28141421 0.49920751 0.31994770 0.1921371 0.17679185 0.27920158</span>
<span class="co">#&gt; [10,15)  0.12577693 0.29891280 0.56187778 0.3893132 0.18752186 0.14276825</span>
<span class="co">#&gt; [15,20)  0.08353808 0.10905846 0.26673504 0.6723250 0.40938587 0.14934301</span>
<span class="co">#&gt; [20,25)  0.12751685 0.07946360 0.10747198 0.3256809 0.69850226 0.34262572</span>
<span class="co">#&gt; [25,30)  0.26836119 0.13722073 0.07941742 0.1230826 0.35163466 0.69378336</span>
<span class="co">#&gt; [30,35)  0.37649549 0.32269174 0.15723765 0.1014014 0.13938513 0.35295995</span>
<span class="co">#&gt; [35,40)  0.25962581 0.44495678 0.36196641 0.2003141 0.12131238 0.14447216</span>
<span class="co">#&gt; [40,45)  0.12120338 0.28303043 0.45143276 0.4176553 0.22494563 0.12617357</span>
<span class="co">#&gt; [45,50)  0.08213005 0.13224852 0.26840125 0.4623190 0.40192032 0.20968131</span>
<span class="co">#&gt; [50,55)  0.09693927 0.09476203 0.12893787 0.2701692 0.41339306 0.34261599</span>
<span class="co">#&gt; [55,60)  0.12695856 0.11552047 0.09674045 0.1380775 0.25348110 0.35765036</span>
<span class="co">#&gt; [60,65)  0.12225317 0.14127560 0.11198704 0.1017702 0.13265551 0.22763886</span>
<span class="co">#&gt; [65,70)  0.08725551 0.11993140 0.12322914 0.1093333 0.09411293 0.11858447</span>
<span class="co">#&gt; [70,75)  0.07083880 0.08752913 0.10646409 0.1210949 0.10085346 0.08716578</span>
<span class="co">#&gt; [75,80)  0.08023989 0.08491865 0.09268572 0.1225107 0.12636327 0.10339911</span>
<span class="co">#&gt; [80,85)  0.09773753 0.11775163 0.11297299 0.1324394 0.15412494 0.15399519</span>
<span class="co">#&gt; [85,Inf) 0.09224802 0.14898260 0.17297280 0.1858527 0.18956079 0.21064016</span>
<span class="co">#&gt;             [30,35)    [35,40)   [40,45)    [45,50)    [50,55)    [55,60)</span>
<span class="co">#&gt; [0,5)    0.73001603 0.51870106 0.2722882 0.17757635 0.17007622 0.17370237</span>
<span class="co">#&gt; [5,10)   0.53358326 0.67863626 0.4603556 0.21808664 0.12619227 0.11699252</span>
<span class="co">#&gt; [10,15)  0.23922278 0.48893787 0.6333721 0.41472215 0.17330786 0.08679862</span>
<span class="co">#&gt; [15,20)  0.10532553 0.17387829 0.3673633 0.49393619 0.31492711 0.12201898</span>
<span class="co">#&gt; [20,25)  0.12206389 0.08883578 0.1501078 0.30489218 0.36598847 0.21071419</span>
<span class="co">#&gt; [25,30)  0.32228708 0.11413889 0.0799477 0.12976295 0.24378440 0.26820304</span>
<span class="co">#&gt; [30,35)  0.65870504 0.30933539 0.1130255 0.07786728 0.11625559 0.19911536</span>
<span class="co">#&gt; [35,40)  0.33118329 0.56487169 0.2702788 0.10592612 0.07337652 0.10306724</span>
<span class="co">#&gt; [40,45)  0.14315903 0.29185196 0.4631176 0.23110633 0.09134525 0.06233749</span>
<span class="co">#&gt; [45,50)  0.12638192 0.14542617 0.2792438 0.42928775 0.20446276 0.07667986</span>
<span class="co">#&gt; [50,55)  0.19446821 0.12816833 0.1507765 0.28919423 0.44230650 0.19976491</span>
<span class="co">#&gt; [55,60)  0.30804756 0.18731581 0.1302923 0.15943351 0.30751781 0.46476555</span>
<span class="co">#&gt; [60,65)  0.32843926 0.29160003 0.1806665 0.12952221 0.15863577 0.30275662</span>
<span class="co">#&gt; [65,70)  0.21048937 0.30431137 0.2645142 0.16453931 0.11763426 0.14358084</span>
<span class="co">#&gt; [70,75)  0.11943753 0.20996497 0.2822329 0.23284425 0.14123650 0.10342022</span>
<span class="co">#&gt; [75,80)  0.09695568 0.13343629 0.2169936 0.26840709 0.20605035 0.12253656</span>
<span class="co">#&gt; [80,85)  0.13639220 0.13038220 0.1686963 0.25465423 0.29470161 0.21883855</span>
<span class="co">#&gt; [85,Inf) 0.23660587 0.23013753 0.2176145 0.26225212 0.37868340 0.46140743</span>
<span class="co">#&gt;             [60,65)    [65,70)    [70,75)    [75,80)    [80,85)    [85,Inf)</span>
<span class="co">#&gt; [0,5)    0.13805695 0.08927752 0.05604122 0.03357613 0.01603591 0.005926145</span>
<span class="co">#&gt; [5,10)   0.12178574 0.10292743 0.06756265 0.03898618 0.02102486 0.009559884</span>
<span class="co">#&gt; [10,15)  0.07237548 0.07508050 0.06375816 0.03884436 0.02002826 0.010384661</span>
<span class="co">#&gt; [15,20)  0.05328651 0.04167863 0.04279200 0.03420021 0.01873802 0.009152847</span>
<span class="co">#&gt; [20,25)  0.07606449 0.03464197 0.02896488 0.02805543 0.01968042 0.009908730</span>
<span class="co">#&gt; [25,30)  0.14004055 0.05048071 0.02576362 0.02205287 0.01991794 0.013076890</span>
<span class="co">#&gt; [30,35)  0.19676284 0.09923824 0.03863107 0.02061006 0.01734744 0.015539579</span>
<span class="co">#&gt; [35,40)  0.15789266 0.14836513 0.07740365 0.03020372 0.01576485 0.013817007</span>
<span class="co">#&gt; [40,45)  0.08012391 0.11756330 0.11444945 0.05870706 0.02210638 0.011821732</span>
<span class="co">#&gt; [45,50)  0.04827169 0.05907503 0.08734705 0.08079522 0.03958241 0.015182613</span>
<span class="co">#&gt; [50,55)  0.06591802 0.03793042 0.04496634 0.06100630 0.05240148 0.025572923</span>
<span class="co">#&gt; [55,60)  0.19154482 0.05960894 0.03354349 0.03536412 0.04223936 0.034948833</span>
<span class="co">#&gt; [60,65)  0.43187677 0.17836319 0.05876491 0.03065552 0.02784732 0.031841603</span>
<span class="co">#&gt; [65,70)  0.26047338 0.37174593 0.16864897 0.05628339 0.02662130 0.023227367</span>
<span class="co">#&gt; [70,75)  0.12663961 0.23046292 0.31963963 0.14501610 0.04791475 0.022477731</span>
<span class="co">#&gt; [75,80)  0.08945789 0.11388266 0.20434598 0.26304995 0.11849904 0.039664475</span>
<span class="co">#&gt; [80,85)  0.12450170 0.08938419 0.10922364 0.17572695 0.20825147 0.097294809</span>
<span class="co">#&gt; [85,Inf) 0.36469859 0.21058503 0.13026349 0.11777088 0.14450103 0.168035014</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $work</span>
<span class="co">#&gt;                [0,5)      [5,10)      [10,15)     [15,20)     [20,25)</span>
<span class="co">#&gt; [0,5)    0.005894683 0.002176138 0.0008380355 0.001083690 0.002062293</span>
<span class="co">#&gt; [5,10)   0.001961451 0.003373327 0.0018074145 0.001663767 0.002308235</span>
<span class="co">#&gt; [10,15)  0.001654039 0.003194048 0.0101621018 0.014419702 0.014530215</span>
<span class="co">#&gt; [15,20)  0.008510080 0.010788020 0.0267117697 0.157903482 0.200495302</span>
<span class="co">#&gt; [20,25)  0.031306295 0.034358675 0.0548097883 0.218916077 0.713241271</span>
<span class="co">#&gt; [25,30)  0.053799283 0.058989219 0.0803374577 0.215383649 0.595684688</span>
<span class="co">#&gt; [30,35)  0.054683325 0.062442139 0.0862055123 0.215357766 0.479886257</span>
<span class="co">#&gt; [35,40)  0.051475769 0.061601356 0.0860986776 0.219525952 0.489668646</span>
<span class="co">#&gt; [40,45)  0.048647322 0.062028306 0.0875734452 0.218517997 0.482092025</span>
<span class="co">#&gt; [45,50)  0.042936886 0.058182484 0.0848211532 0.205832947 0.434543866</span>
<span class="co">#&gt; [50,55)  0.033698419 0.049448046 0.0753562323 0.182068563 0.366489990</span>
<span class="co">#&gt; [55,60)  0.019023426 0.032887550 0.0551619328 0.135634635 0.259973947</span>
<span class="co">#&gt; [60,65)  0.006525260 0.013466976 0.0275373462 0.075616596 0.142020671</span>
<span class="co">#&gt; [65,70)  0.002041111 0.004052323 0.0099274386 0.034592854 0.071799103</span>
<span class="co">#&gt; [70,75)  0.001505720 0.001881523 0.0040222549 0.016808888 0.044879419</span>
<span class="co">#&gt; [75,80)  0.003073122 0.002078825 0.0024500045 0.008118873 0.024683950</span>
<span class="co">#&gt; [80,85)  0.005354746 0.002960401 0.0019717290 0.003466754 0.007866421</span>
<span class="co">#&gt; [85,Inf) 0.002915598 0.001899323 0.0011655864 0.001294225 0.001666381</span>
<span class="co">#&gt;              [25,30)     [30,35)     [35,40)     [40,45)     [45,50)</span>
<span class="co">#&gt; [0,5)    0.003431507 0.004556787 0.004758869 0.004659767 0.004869583</span>
<span class="co">#&gt; [5,10)   0.002702522 0.003060998 0.003054194 0.002881073 0.002843251</span>
<span class="co">#&gt; [10,15)  0.011869087 0.010380865 0.009365324 0.008570597 0.007949340</span>
<span class="co">#&gt; [15,20)  0.132725369 0.094385492 0.073584813 0.064330956 0.059491359</span>
<span class="co">#&gt; [20,25)  0.650846021 0.428374427 0.303261623 0.244628339 0.219187192</span>
<span class="co">#&gt; [25,30)  1.075798973 0.858568020 0.595007646 0.458860931 0.391736656</span>
<span class="co">#&gt; [30,35)  0.784683017 0.915878077 0.713995896 0.546029799 0.458832301</span>
<span class="co">#&gt; [35,40)  0.752475553 0.860609975 0.796951954 0.642630181 0.529935618</span>
<span class="co">#&gt; [40,45)  0.737403374 0.845702440 0.820712182 0.751118079 0.621237827</span>
<span class="co">#&gt; [45,50)  0.642595043 0.716527356 0.689893622 0.670293980 0.663316918</span>
<span class="co">#&gt; [50,55)  0.520090206 0.568049008 0.532667367 0.503127292 0.525198929</span>
<span class="co">#&gt; [55,60)  0.343681413 0.367259123 0.354487943 0.339354147 0.345864278</span>
<span class="co">#&gt; [60,65)  0.169561480 0.163268564 0.154792525 0.159083720 0.171495372</span>
<span class="co">#&gt; [65,70)  0.082826984 0.069702133 0.057015991 0.056106878 0.064163426</span>
<span class="co">#&gt; [70,75)  0.061401110 0.051283541 0.035760891 0.029232242 0.030054365</span>
<span class="co">#&gt; [75,80)  0.044017139 0.044843667 0.031383609 0.021788609 0.018295222</span>
<span class="co">#&gt; [80,85)  0.014558538 0.018290274 0.015322824 0.010740306 0.007903772</span>
<span class="co">#&gt; [85,Inf) 0.002103722 0.002419067 0.002252272 0.001788067 0.001347020</span>
<span class="co">#&gt;               [50,55)      [55,60)      [60,65)      [65,70)      [70,75)</span>
<span class="co">#&gt; [0,5)    0.0047614535 0.0036422043 0.0018714499 7.263916e-04 2.573823e-04</span>
<span class="co">#&gt; [5,10)   0.0027156697 0.0022546940 0.0014344984 7.359479e-04 3.097827e-04</span>
<span class="co">#&gt; [10,15)  0.0067737386 0.0051238529 0.0033906328 2.190715e-03 1.321376e-03</span>
<span class="co">#&gt; [15,20)  0.0485233951 0.0326867432 0.0189316110 1.189360e-02 8.581683e-03</span>
<span class="co">#&gt; [20,25)  0.1787519752 0.1180279677 0.0619656845 3.327484e-02 2.257074e-02</span>
<span class="co">#&gt; [25,30)  0.3091862505 0.2029112140 0.1037492249 5.050776e-02 3.006800e-02</span>
<span class="co">#&gt; [30,35)  0.3522754653 0.2249150647 0.1146328513 5.563472e-02 3.134617e-02</span>
<span class="co">#&gt; [35,40)  0.4024900996 0.2548334542 0.1287701710 6.374781e-02 3.735273e-02</span>
<span class="co">#&gt; [40,45)  0.4549455564 0.2846783772 0.1450969219 7.323396e-02 4.546175e-02</span>
<span class="co">#&gt; [45,50)  0.4822894721 0.2848257132 0.1411462260 7.158328e-02 4.562064e-02</span>
<span class="co">#&gt; [50,55)  0.4930182471 0.2907020396 0.1329450018 6.369164e-02 3.924658e-02</span>
<span class="co">#&gt; [55,60)  0.3405877032 0.2719776693 0.1254277280 5.487188e-02 3.116576e-02</span>
<span class="co">#&gt; [60,65)  0.1685548041 0.1427695999 0.0925374678 4.167190e-02 2.181045e-02</span>
<span class="co">#&gt; [65,70)  0.0667102962 0.0565124588 0.0399093190 2.700255e-02 1.468267e-02</span>
<span class="co">#&gt; [70,75)  0.0306913959 0.0258506760 0.0178024187 1.328136e-02 1.108986e-02</span>
<span class="co">#&gt; [75,80)  0.0157767405 0.0119371348 0.0074304500 5.015284e-03 4.670701e-03</span>
<span class="co">#&gt; [80,85)  0.0055928929 0.0034010112 0.0017248470 9.416576e-04 7.261649e-04</span>
<span class="co">#&gt; [85,Inf) 0.0008833801 0.0004542853 0.0001753051 6.770413e-05 3.674261e-05</span>
<span class="co">#&gt;               [75,80)      [80,85)     [85,Inf)</span>
<span class="co">#&gt; [0,5)    9.871176e-05 5.782919e-05 8.204936e-05</span>
<span class="co">#&gt; [5,10)   1.061502e-04 3.814982e-05 2.655008e-05</span>
<span class="co">#&gt; [10,15)  6.221507e-04 2.343665e-04 9.447832e-05</span>
<span class="co">#&gt; [15,20)  5.800276e-03 3.247601e-03 1.576107e-03</span>
<span class="co">#&gt; [20,25)  1.710358e-02 1.272159e-02 8.955121e-03</span>
<span class="co">#&gt; [25,30)  2.158087e-02 1.778027e-02 1.669190e-02</span>
<span class="co">#&gt; [30,35)  2.013520e-02 1.569940e-02 1.662588e-02</span>
<span class="co">#&gt; [35,40)  2.398575e-02 1.757338e-02 1.803179e-02</span>
<span class="co">#&gt; [40,45)  3.223714e-02 2.537831e-02 2.621479e-02</span>
<span class="co">#&gt; [45,50)  3.483253e-02 3.152623e-02 3.777953e-02</span>
<span class="co">#&gt; [50,55)  2.943168e-02 2.785017e-02 3.952730e-02</span>
<span class="co">#&gt; [55,60)  2.141345e-02 1.828777e-02 2.538504e-02</span>
<span class="co">#&gt; [60,65)  1.384918e-02 1.054880e-02 1.196711e-02</span>
<span class="co">#&gt; [65,70)  8.789380e-03 6.495321e-03 6.712023e-03</span>
<span class="co">#&gt; [70,75)  6.688502e-03 4.697732e-03 5.040321e-03</span>
<span class="co">#&gt; [75,80)  4.765421e-03 3.152544e-03 3.087492e-03</span>
<span class="co">#&gt; [80,85)  8.803626e-04 1.144578e-03 9.249872e-04</span>
<span class="co">#&gt; [85,Inf) 3.360343e-05 5.796474e-05 1.135839e-04</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $school</span>
<span class="co">#&gt;                [0,5)       [5,10)      [10,15)      [15,20)      [20,25)</span>
<span class="co">#&gt; [0,5)    2.836389689  0.807771577 8.988331e-02 2.039086e-02 1.485914e-02</span>
<span class="co">#&gt; [5,10)   0.609136450 15.532987250 2.331581e+00 4.920156e-02 2.078884e-02</span>
<span class="co">#&gt; [10,15)  0.018489573  1.549945091 2.722254e+01 1.245519e+00 1.853875e-02</span>
<span class="co">#&gt; [15,20)  0.032097693  0.068461706 9.435625e-01 4.445995e+00 2.409598e-01</span>
<span class="co">#&gt; [20,25)  0.078926794  0.142394957 1.539809e-01 1.795672e-01 3.833499e-01</span>
<span class="co">#&gt; [25,30)  0.090983127  0.264415331 3.069029e-01 7.128067e-02 3.212431e-02</span>
<span class="co">#&gt; [30,35)  0.091744190  0.267137661 3.935812e-01 1.122140e-01 2.302667e-02</span>
<span class="co">#&gt; [35,40)  0.126432246  0.344005220 3.939436e-01 1.009647e-01 2.286852e-02</span>
<span class="co">#&gt; [40,45)  0.145725229  0.491395855 5.595918e-01 1.075621e-01 1.530888e-02</span>
<span class="co">#&gt; [45,50)  0.165543633  0.625359236 8.187765e-01 1.706474e-01 1.985635e-02</span>
<span class="co">#&gt; [50,55)  0.199533440  0.709417095 8.735058e-01 1.957152e-01 2.859497e-02</span>
<span class="co">#&gt; [55,60)  0.158590698  0.577749995 5.732111e-01 1.014633e-01 1.470813e-02</span>
<span class="co">#&gt; [60,65)  0.043707649  0.220531025 2.201666e-01 3.143376e-02 3.659418e-03</span>
<span class="co">#&gt; [65,70)  0.005406544  0.036095087 4.982063e-02 8.320866e-03 1.407341e-03</span>
<span class="co">#&gt; [70,75)  0.003125643  0.009333302 1.040357e-02 1.800565e-03 4.006187e-04</span>
<span class="co">#&gt; [75,80)  0.009870472  0.005944925 2.570723e-03 2.601190e-04 4.460864e-05</span>
<span class="co">#&gt; [80,85)  0.040885571  0.005073950 4.676206e-04 1.607494e-05 1.056762e-06</span>
<span class="co">#&gt; [85,Inf) 0.044813947  0.004761378 1.209902e-04 8.469748e-07 1.022135e-08</span>
<span class="co">#&gt;               [25,30)      [30,35)      [35,40)      [40,45)      [45,50)</span>
<span class="co">#&gt; [0,5)    2.696161e-02 5.617877e-02 1.026627e-01 1.272277e-01 8.602654e-02</span>
<span class="co">#&gt; [5,10)   5.567565e-02 1.408907e-01 2.310550e-01 2.768908e-01 2.585247e-01</span>
<span class="co">#&gt; [10,15)  3.272827e-02 1.202941e-01 2.596498e-01 2.958657e-01 2.628319e-01</span>
<span class="co">#&gt; [15,20)  2.954893e-02 6.943522e-02 2.000542e-01 2.949052e-01 2.425059e-01</span>
<span class="co">#&gt; [20,25)  5.549706e-02 3.261025e-02 6.971634e-02 1.194321e-01 1.113901e-01</span>
<span class="co">#&gt; [25,30)  6.187750e-02 3.719371e-02 3.768663e-02 5.618078e-02 6.244499e-02</span>
<span class="co">#&gt; [30,35)  2.508533e-02 4.820682e-02 4.941948e-02 4.524576e-02 4.412347e-02</span>
<span class="co">#&gt; [35,40)  2.447566e-02 4.977941e-02 6.221173e-02 6.007583e-02 3.817472e-02</span>
<span class="co">#&gt; [40,45)  1.403244e-02 3.837532e-02 7.852488e-02 7.777582e-02 5.678997e-02</span>
<span class="co">#&gt; [45,50)  1.029493e-02 1.856185e-02 4.842722e-02 8.995991e-02 8.011322e-02</span>
<span class="co">#&gt; [50,55)  1.612736e-02 2.007518e-02 2.964359e-02 5.400470e-02 8.337163e-02</span>
<span class="co">#&gt; [55,60)  1.139544e-02 1.944628e-02 2.703751e-02 3.096249e-02 4.196856e-02</span>
<span class="co">#&gt; [60,65)  2.838167e-03 6.913738e-03 1.559329e-02 2.106329e-02 2.055711e-02</span>
<span class="co">#&gt; [65,70)  1.155580e-03 2.450882e-03 7.334246e-03 1.664287e-02 2.132329e-02</span>
<span class="co">#&gt; [70,75)  4.402742e-04 1.076456e-03 3.469801e-03 1.028513e-02 1.916996e-02</span>
<span class="co">#&gt; [75,80)  5.685909e-05 2.141561e-04 1.016686e-03 3.999985e-03 1.072862e-02</span>
<span class="co">#&gt; [80,85)  8.140636e-07 3.306501e-06 2.545465e-05 1.532275e-04 5.840794e-04</span>
<span class="co">#&gt; [85,Inf) 1.672976e-09 2.497863e-09 1.578079e-08 1.321073e-07 7.163680e-07</span>
<span class="co">#&gt;               [50,55)      [55,60)      [60,65)      [65,70)      [70,75)</span>
<span class="co">#&gt; [0,5)    4.051653e-02 2.008334e-02 1.566824e-02 1.090302e-02 4.874445e-03</span>
<span class="co">#&gt; [5,10)   1.713056e-01 6.939351e-02 2.812449e-02 1.478065e-02 8.005950e-03</span>
<span class="co">#&gt; [10,15)  2.211740e-01 1.113283e-01 3.803345e-02 1.289520e-02 5.997130e-03</span>
<span class="co">#&gt; [15,20)  1.801587e-01 1.006087e-01 3.711489e-02 9.101653e-03 2.414004e-03</span>
<span class="co">#&gt; [20,25)  7.625609e-02 3.985496e-02 1.822741e-02 6.168436e-03 1.165914e-03</span>
<span class="co">#&gt; [25,30)  4.696832e-02 2.361355e-02 1.254658e-02 6.386368e-03 1.169520e-03</span>
<span class="co">#&gt; [30,35)  3.916904e-02 2.338392e-02 1.445641e-02 9.996229e-03 2.694514e-03</span>
<span class="co">#&gt; [35,40)  2.464096e-02 1.507040e-02 1.179190e-02 1.210571e-02 5.622835e-03</span>
<span class="co">#&gt; [40,45)  2.571787e-02 8.588164e-03 4.949671e-03 6.054235e-03 4.694937e-03</span>
<span class="co">#&gt; [45,50)  5.148787e-02 1.429930e-02 3.776207e-03 2.486160e-03 1.837525e-03</span>
<span class="co">#&gt; [50,55)  7.044100e-02 3.454647e-02 9.775863e-03 3.263289e-03 1.193047e-03</span>
<span class="co">#&gt; [55,60)  5.549027e-02 3.487668e-02 1.737068e-02 6.306669e-03 1.495289e-03</span>
<span class="co">#&gt; [60,65)  2.425675e-02 2.507986e-02 1.922165e-02 7.891781e-03 1.538829e-03</span>
<span class="co">#&gt; [65,70)  1.910142e-02 1.600344e-02 1.795552e-02 1.702980e-02 3.079789e-03</span>
<span class="co">#&gt; [70,75)  1.885064e-02 9.939194e-03 6.292303e-03 9.721629e-03 1.874836e-02</span>
<span class="co">#&gt; [75,80)  1.458756e-02 7.192622e-03 2.065339e-03 1.157127e-03 5.520395e-03</span>
<span class="co">#&gt; [80,85)  1.223402e-03 8.742084e-04 2.264866e-04 4.625610e-05 5.096278e-05</span>
<span class="co">#&gt; [85,Inf) 2.000293e-06 2.216510e-06 9.723263e-07 2.053981e-07 7.865824e-08</span>
<span class="co">#&gt;               [75,80)      [80,85)     [85,Inf)</span>
<span class="co">#&gt; [0,5)    1.796350e-03 5.801422e-04 1.648066e-04</span>
<span class="co">#&gt; [5,10)   3.098657e-03 5.461408e-04 6.512885e-05</span>
<span class="co">#&gt; [10,15)  3.021955e-03 5.842537e-04 3.033233e-05</span>
<span class="co">#&gt; [15,20)  1.098726e-03 2.920850e-04 1.640525e-05</span>
<span class="co">#&gt; [20,25)  2.986940e-04 7.321087e-05 5.494120e-06</span>
<span class="co">#&gt; [25,30)  1.802960e-04 2.499378e-05 1.717799e-06</span>
<span class="co">#&gt; [30,35)  4.995558e-04 5.503392e-05 2.733112e-06</span>
<span class="co">#&gt; [35,40)  2.111089e-03 4.034680e-04 2.495355e-05</span>
<span class="co">#&gt; [40,45)  3.785142e-03 1.695300e-03 2.367479e-04</span>
<span class="co">#&gt; [45,50)  2.175632e-03 1.834882e-03 5.669447e-04</span>
<span class="co">#&gt; [50,55)  9.332703e-04 7.485269e-04 3.068814e-04</span>
<span class="co">#&gt; [55,60)  6.865986e-04 3.264495e-04 8.109806e-05</span>
<span class="co">#&gt; [60,65)  5.149600e-04 2.004676e-04 3.499473e-05</span>
<span class="co">#&gt; [65,70)  4.730013e-04 1.377458e-04 2.798970e-05</span>
<span class="co">#&gt; [70,75)  3.062132e-03 1.951391e-04 2.650692e-05</span>
<span class="co">#&gt; [75,80)  2.078730e-02 1.473322e-03 2.490141e-05</span>
<span class="co">#&gt; [80,85)  9.952135e-04 3.167327e-03 4.612353e-05</span>
<span class="co">#&gt; [85,Inf) 3.181677e-07 9.629831e-06 2.169219e-05</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $other</span>
<span class="co">#&gt;               [0,5)     [5,10)    [10,15)    [15,20)    [20,25)    [25,30)</span>
<span class="co">#&gt; [0,5)    0.50512001 0.22053985 0.08476895 0.12888246 0.28089361 0.47793181</span>
<span class="co">#&gt; [5,10)   0.30045407 1.02250579 0.37446635 0.17372733 0.20144151 0.32167815</span>
<span class="co">#&gt; [10,15)  0.07008453 0.35290936 1.66009677 0.85412379 0.31220525 0.24110844</span>
<span class="co">#&gt; [15,20)  0.05379394 0.07695486 0.35543372 2.86925428 1.54403043 0.48661801</span>
<span class="co">#&gt; [20,25)  0.08261173 0.07314361 0.11459319 0.69957668 2.93530628 1.37980161</span>
<span class="co">#&gt; [25,30)  0.10844915 0.10019754 0.10984206 0.25961794 0.88095825 1.87553871</span>
<span class="co">#&gt; [30,35)  0.11409732 0.12166148 0.13184839 0.24728052 0.49560057 0.89049040</span>
<span class="co">#&gt; [35,40)  0.10262227 0.13256032 0.15173218 0.25841790 0.44630900 0.67284738</span>
<span class="co">#&gt; [40,45)  0.07380501 0.10785383 0.15474211 0.27577868 0.40133059 0.50430201</span>
<span class="co">#&gt; [45,50)  0.05603388 0.07056072 0.12017390 0.28246403 0.44585625 0.45678955</span>
<span class="co">#&gt; [50,55)  0.05447557 0.05380410 0.07994227 0.23017948 0.49967718 0.60349397</span>
<span class="co">#&gt; [55,60)  0.05342917 0.05617543 0.06549694 0.15978886 0.39888504 0.65548187</span>
<span class="co">#&gt; [60,65)  0.04325173 0.05958309 0.07118462 0.13366247 0.26621588 0.45219556</span>
<span class="co">#&gt; [65,70)  0.03577517 0.05214094 0.07515087 0.14559228 0.22776530 0.29910678</span>
<span class="co">#&gt; [70,75)  0.04359843 0.04673645 0.06224076 0.14062068 0.24092495 0.28605492</span>
<span class="co">#&gt; [75,80)  0.05834054 0.04943107 0.04378058 0.08625701 0.17170762 0.23961071</span>
<span class="co">#&gt; [80,85)  0.04723185 0.04643255 0.03140211 0.03832975 0.06374577 0.10002991</span>
<span class="co">#&gt; [85,Inf) 0.01386869 0.02316245 0.02161908 0.02148007 0.02140416 0.02461688</span>
<span class="co">#&gt;             [30,35)    [35,40)    [40,45)    [45,50)    [50,55)    [55,60)</span>
<span class="co">#&gt; [0,5)    0.53571478 0.40060267 0.26558072 0.20889605 0.19887817 0.20434078</span>
<span class="co">#&gt; [5,10)   0.47477547 0.47778804 0.32954381 0.20448932 0.14549326 0.13202153</span>
<span class="co">#&gt; [10,15)  0.28581158 0.35813413 0.33582402 0.22765666 0.13108565 0.08672136</span>
<span class="co">#&gt; [15,20)  0.30198721 0.28415897 0.30427478 0.27117488 0.17702140 0.09835811</span>
<span class="co">#&gt; [20,25)  0.54169475 0.34558826 0.30473617 0.29651390 0.24200887 0.15507732</span>
<span class="co">#&gt; [25,30)  0.98264835 0.49222553 0.34061592 0.30487025 0.28293080 0.22995287</span>
<span class="co">#&gt; [30,35)  1.10653918 0.68485521 0.40475351 0.30560582 0.27963853 0.27365847</span>
<span class="co">#&gt; [35,40)  0.84626261 0.78933333 0.52887123 0.33879882 0.25283920 0.24180474</span>
<span class="co">#&gt; [40,45)  0.62689812 0.70358281 0.63630864 0.43985302 0.27047992 0.19287447</span>
<span class="co">#&gt; [45,50)  0.43993645 0.48580278 0.55974961 0.55331145 0.38292920 0.22741871</span>
<span class="co">#&gt; [50,55)  0.49372145 0.40217874 0.41736221 0.50431587 0.51714551 0.38309333</span>
<span class="co">#&gt; [55,60)  0.66342478 0.50112870 0.40204182 0.43088783 0.51690424 0.52803598</span>
<span class="co">#&gt; [60,65)  0.58465101 0.54391453 0.42774415 0.38396840 0.43300987 0.52184357</span>
<span class="co">#&gt; [65,70)  0.37183513 0.40664885 0.37551589 0.33038233 0.32656281 0.39179762</span>
<span class="co">#&gt; [70,75)  0.29802429 0.31120590 0.32291827 0.31336776 0.28828910 0.29582225</span>
<span class="co">#&gt; [75,80)  0.25160525 0.24150765 0.25142335 0.27906246 0.28201855 0.26132189</span>
<span class="co">#&gt; [80,85)  0.12259916 0.12064043 0.11921281 0.13947484 0.17125092 0.18500266</span>
<span class="co">#&gt; [85,Inf) 0.03007645 0.03101498 0.02806423 0.02858035 0.03629888 0.04968320</span>
<span class="co">#&gt;             [60,65)    [65,70)    [70,75)    [75,80)    [80,85)    [85,Inf)</span>
<span class="co">#&gt; [0,5)    0.18229777 0.13507591 0.08173765 0.03780589 0.01548267 0.008626380</span>
<span class="co">#&gt; [5,10)   0.12586076 0.10880575 0.07462757 0.03765920 0.01570330 0.007996260</span>
<span class="co">#&gt; [10,15)  0.07342159 0.07076774 0.05948152 0.03695472 0.01787812 0.007961036</span>
<span class="co">#&gt; [15,20)  0.05909280 0.04737525 0.04290329 0.03394438 0.02192525 0.011466997</span>
<span class="co">#&gt; [20,25)  0.08221468 0.04706591 0.03490998 0.02783520 0.02117817 0.013922981</span>
<span class="co">#&gt; [25,30)  0.14045221 0.07012785 0.03784910 0.02510137 0.01931333 0.014708517</span>
<span class="co">#&gt; [30,35)  0.21919429 0.12858747 0.06240105 0.03089658 0.02042986 0.017313114</span>
<span class="co">#&gt; [35,40)  0.23978917 0.19204697 0.11161466 0.05028286 0.02588299 0.020771038</span>
<span class="co">#&gt; [40,45)  0.17099335 0.16706983 0.13754793 0.07692786 0.03595018 0.022638759</span>
<span class="co">#&gt; [45,50)  0.14139070 0.11341990 0.10807081 0.08287765 0.04727597 0.025975437</span>
<span class="co">#&gt; [50,55)  0.21605719 0.12236511 0.09017975 0.07359109 0.05367008 0.034049614</span>
<span class="co">#&gt; [55,60)  0.38569286 0.21349171 0.11752557 0.07453038 0.05463058 0.041468444</span>
<span class="co">#&gt; [60,65)  0.49879988 0.34729687 0.18957263 0.09521028 0.05673236 0.043334899</span>
<span class="co">#&gt; [65,70)  0.46765948 0.46252441 0.29124128 0.13640380 0.06696526 0.044800629</span>
<span class="co">#&gt; [70,75)  0.34352627 0.42828022 0.43367602 0.21809534 0.09250329 0.052622086</span>
<span class="co">#&gt; [75,80)  0.24297009 0.26545681 0.32953768 0.32906983 0.14613795 0.065968481</span>
<span class="co">#&gt; [80,85)  0.16153039 0.13786591 0.13669241 0.16234115 0.17429102 0.080391859</span>
<span class="co">#&gt; [85,Inf) 0.05593572 0.05052469 0.04161889 0.03803070 0.04747303 0.064376396</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $all</span>
<span class="co">#&gt;              [0,5)     [5,10)    [10,15)   [15,20)   [20,25)   [25,30)</span>
<span class="co">#&gt; [0,5)    3.7435680  1.3246735  0.3593986 0.3527962 0.6392526 1.1072313</span>
<span class="co">#&gt; [5,10)   1.1929662 17.0580739  3.0278025 0.4167298 0.4013304 0.6592579</span>
<span class="co">#&gt; [10,15)  0.2160051  2.2049613 29.4546730 2.5033759 0.5327961 0.4284741</span>
<span class="co">#&gt; [15,20)  0.1779398  0.2652630  1.5924430 8.1454780 2.3948714 0.7982353</span>
<span class="co">#&gt; [20,25)  0.3203617  0.3293608  0.4308558 1.4237408 4.7303997 2.4287704</span>
<span class="co">#&gt; [25,30)  0.5215928  0.5608228  0.5764999 0.6693648 1.8604019 3.7069985</span>
<span class="co">#&gt; [30,35)  0.6370203  0.7739330  0.7688727 0.6762537 1.1378986 2.0532187</span>
<span class="co">#&gt; [35,40)  0.5401561  0.9831237  0.9937408 0.7792227 1.0801585 1.5942708</span>
<span class="co">#&gt; [40,45)  0.3893809  0.9443084  1.2533401 1.0195141 1.1236771 1.3819114</span>
<span class="co">#&gt; [45,50)  0.3466444  0.8863510  1.2921728 1.1212634 1.3021768 1.3193608</span>
<span class="co">#&gt; [50,55)  0.3846467  0.9074313  1.1577422 0.8781324 1.3081552 1.4823275</span>
<span class="co">#&gt; [55,60)  0.3580019  0.7823334  0.7906104 0.5349643 0.9270482 1.3682091</span>
<span class="co">#&gt; [60,65)  0.2157378  0.4348567  0.4308756 0.3424830 0.5445515 0.8522341</span>
<span class="co">#&gt; [65,70)  0.1304783  0.2122198  0.2581281 0.2978393 0.3950847 0.5016738</span>
<span class="co">#&gt; [70,75)  0.1190686  0.1454804  0.1831307 0.2803250 0.3870584 0.4350621</span>
<span class="co">#&gt; [75,80)  0.1515240  0.1423735  0.1414870 0.2171467 0.3227994 0.3870838</span>
<span class="co">#&gt; [80,85)  0.1912097  0.1722185  0.1468145 0.1742520 0.2257382 0.2685845</span>
<span class="co">#&gt; [85,Inf) 0.1538463  0.1788057  0.1958785 0.2086278 0.2126313 0.2373608</span>
<span class="co">#&gt;            [30,35)   [35,40)   [40,45)   [45,50)   [50,55)   [55,60)   [60,65)</span>
<span class="co">#&gt; [0,5)    1.3264664 1.0267253 0.6697564 0.4773685 0.4142324 0.4017687 0.3378944</span>
<span class="co">#&gt; [5,10)   1.1523105 1.3905335 1.0696712 0.6839439 0.4457068 0.3206623 0.2772055</span>
<span class="co">#&gt; [10,15)  0.6557094 1.1160871 1.2736324 0.9131601 0.5323412 0.2899721 0.1872212</span>
<span class="co">#&gt; [15,20)  0.5711334 0.7316763 1.0308742 1.0671083 0.7206306 0.3536725 0.1684258</span>
<span class="co">#&gt; [20,25)  1.1247433 0.8074020 0.8189044 0.9319834 0.8630054 0.5236744 0.2384723</span>
<span class="co">#&gt; [25,30)  2.2006972 1.2390587 0.9356053 0.8888148 0.8828698 0.7246807 0.3967886</span>
<span class="co">#&gt; [30,35)  2.7293291 1.7576060 1.1090546 0.8864289 0.7873386 0.7210728 0.5450464</span>
<span class="co">#&gt; [35,40)  2.0878353 2.2133687 1.5018561 1.0128353 0.7533468 0.6147758 0.5382439</span>
<span class="co">#&gt; [40,45)  1.6541349 1.8946718 1.9283202 1.3489871 0.8424886 0.5484785 0.4011639</span>
<span class="co">#&gt; [45,50)  1.3014076 1.3695498 1.5992473 1.7260293 1.1211693 0.6032236 0.3345848</span>
<span class="co">#&gt; [50,55)  1.2763139 1.0926580 1.1252707 1.4020806 1.5229113 0.9081068 0.4246961</span>
<span class="co">#&gt; [55,60)  1.3581777 1.0699700 0.9026507 0.9781542 1.2205000 1.2996559 0.7200361</span>
<span class="co">#&gt; [60,65)  1.0832726 1.0059004 0.7885576 0.7055431 0.7844572 0.9924496 1.0424358</span>
<span class="co">#&gt; [65,70)  0.6544775 0.7753105 0.7127798 0.5804084 0.5300088 0.6078944 0.7859977</span>
<span class="co">#&gt; [70,75)  0.4698218 0.5604016 0.6446685 0.5954363 0.4790676 0.4350323 0.4942606</span>
<span class="co">#&gt; [75,80)  0.3936188 0.4073442 0.4942055 0.5764934 0.5184332 0.4029882 0.3419238</span>
<span class="co">#&gt; [80,85)  0.2772849 0.2663709 0.2988026 0.4026169 0.4727688 0.4081164 0.2879834</span>
<span class="co">#&gt; [85,Inf) 0.2691014 0.2634048 0.2474670 0.2921802 0.4158677 0.5115471 0.4208106</span>
<span class="co">#&gt;            [65,70)    [70,75)    [75,80)    [80,85)   [85,Inf)</span>
<span class="co">#&gt; [0,5)    0.2359828 0.14291069 0.07327708 0.03215655 0.01479938</span>
<span class="co">#&gt; [5,10)   0.2272498 0.15050595 0.07985019 0.03731245 0.01764782</span>
<span class="co">#&gt; [10,15)  0.1609341 0.13055819 0.07944319 0.03872500 0.01847051</span>
<span class="co">#&gt; [15,20)  0.1100491 0.09669097 0.07504359 0.04420296 0.02221236</span>
<span class="co">#&gt; [20,25)  0.1211511 0.08761151 0.07329290 0.05365339 0.03279233</span>
<span class="co">#&gt; [25,30)  0.1775027 0.09485024 0.06891542 0.05703654 0.04447903</span>
<span class="co">#&gt; [30,35)  0.2934567 0.13507280 0.07214139 0.05353174 0.04948131</span>
<span class="co">#&gt; [35,40)  0.4162656 0.23199387 0.10658342 0.05962469 0.05264479</span>
<span class="co">#&gt; [40,45)  0.3639213 0.30215406 0.17165720 0.08513017 0.06091203</span>
<span class="co">#&gt; [45,50)  0.2465644 0.24287603 0.20068103 0.12021949 0.07950453</span>
<span class="co">#&gt; [50,55)  0.2272505 0.17558573 0.16496234 0.13467026 0.09945672</span>
<span class="co">#&gt; [55,60)  0.3342792 0.18373011 0.13199456 0.11548416 0.10188342</span>
<span class="co">#&gt; [60,65)  0.5752238 0.27168682 0.14022994 0.09532895 0.08717861</span>
<span class="co">#&gt; [65,70)  0.8783027 0.47765271 0.20194957 0.10021963 0.07476801</span>
<span class="co">#&gt; [70,75)  0.6817461 0.78315388 0.37286207 0.14531091 0.08016664</span>
<span class="co">#&gt; [75,80)  0.3855119 0.54407476 0.61767249 0.26926285 0.10874535</span>
<span class="co">#&gt; [80,85)  0.2282380 0.24669318 0.33994368 0.38685439 0.17865778</span>
<span class="co">#&gt; [85,Inf) 0.2611776 0.17191920 0.15583550 0.19204166 0.23254669</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># this code is erroring for the moment - something to do with rendering a large plot I think.</span>
<span class="co"># plot_setting_matrices(</span>
<span class="co">#   synthetic_settings_5y_sydney,</span>
<span class="co">#   title = "Setting-specific synthetic contact matrices (Sydney 2020 projected)"</span>
<span class="co"># )</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">home</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-1.png" width="100%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">work</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-2.png" width="100%"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">school</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-3.png" width="100%"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">other</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-4.png" width="100%"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">all</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-5.png" width="100%"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># build synthetic age-structured contact matrices with GAMs</span>
<span class="co"># analysis of polymod data</span>

<span class="co"># set age breaks</span>
<span class="va">age_breaks_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">75</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>
<span class="va">age_breaks_1y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>

<span class="co"># fit a single overall contact model to polymod</span>
<span class="va">m_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_single_contact_model.html">fit_single_contact_model</a></span><span class="op">(</span>
  contact_data <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_contact_data.html">get_polymod_contact_data</a></span><span class="op">(</span><span class="st">"all"</span><span class="op">)</span>,
  population <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">m_all</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Family: poisson </span>
<span class="co">#&gt; Link function: log </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Formula:</span>
<span class="co">#&gt; contacts ~ stats::offset(log(pop_age_to)) + s(age_to) + s(age_from) + </span>
<span class="co">#&gt;     s(abs(age_from - age_to)) + s(abs(age_from - age_to), age_from) + </span>
<span class="co">#&gt;     school_probability + work_probability</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Estimated degrees of freedom:</span>
<span class="co">#&gt;  8.41  8.99  8.72 26.91  total = 57.03 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; fREML score: 21302.89</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># predict contacts at 1y and 5y resolutions for inspection</span>
<span class="va">synthetic_all_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predict_contacts.html">predict_contacts</a></span><span class="op">(</span>
  model <span class="op">=</span> <span class="va">m_all</span>, 
  population <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>,
  age_breaks <span class="op">=</span> <span class="va">age_breaks_5y</span>
<span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/predictions_to_matrix.html">predictions_to_matrix</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">synthetic_all_5y</span>
<span class="co">#&gt;              [0,5)    [5,10)   [10,15)   [15,20)   [20,25)   [25,30)   [30,35)</span>
<span class="co">#&gt; [0,5)    2.2989327 0.9948659 0.2671869 0.2371729 0.4144397 0.7776610 1.0682154</span>
<span class="co">#&gt; [5,10)   0.9289026 5.9312936 1.6445191 0.3299359 0.2987637 0.6009662 1.1466837</span>
<span class="co">#&gt; [10,15)  0.1570390 1.4514003 8.6763018 1.7927751 0.3224954 0.3467841 0.6561107</span>
<span class="co">#&gt; [15,20)  0.1495915 0.2503761 1.6266039 7.7895389 1.6895610 0.4980788 0.5222627</span>
<span class="co">#&gt; [20,25)  0.3047072 0.2990447 0.3760611 1.3702503 4.8994576 1.7514208 0.8328861</span>
<span class="co">#&gt; [25,30)  0.4323030 0.5047311 0.5180950 0.5904849 1.2389608 2.7857742 1.6748915</span>
<span class="co">#&gt; [30,35)  0.4758144 0.6136944 0.6735841 0.7245552 0.8853001 1.4145785 2.0345581</span>
<span class="co">#&gt; [35,40)  0.4751910 0.7236705 0.7841662 0.7694373 0.8881011 1.2904142 1.8454043</span>
<span class="co">#&gt; [40,45)  0.3621764 0.6758180 0.9047179 0.8694788 0.7956182 0.9758380 1.4907040</span>
<span class="co">#&gt; [45,50)  0.2672879 0.4624337 0.7813928 0.9966340 0.9488859 0.8659994 0.9731161</span>
<span class="co">#&gt; [50,55)  0.2644531 0.3329077 0.4945130 0.7958056 1.0833585 1.1618201 1.0448222</span>
<span class="co">#&gt; [55,60)  0.2771514 0.3419260 0.3585758 0.4630202 0.7306014 1.1134585 1.2837597</span>
<span class="co">#&gt; [60,65)  0.2045419 0.3545927 0.3671301 0.3352447 0.3906167 0.6034432 0.9139625</span>
<span class="co">#&gt; [65,70)  0.1207227 0.2522464 0.3436813 0.3353842 0.3156589 0.3679093 0.5087792</span>
<span class="co">#&gt; [70,75)  0.1132641 0.1655631 0.2181797 0.2649754 0.3012628 0.3470747 0.4184672</span>
<span class="co">#&gt; [75,Inf) 0.2496330 0.2721724 0.1982312 0.1731388 0.1918892 0.2160376 0.2654553</span>
<span class="co">#&gt;            [35,40)   [40,45)   [45,50)   [50,55)   [55,60)   [60,65)   [65,70)</span>
<span class="co">#&gt; [0,5)    0.9435017 0.6460295 0.4559626 0.3865511 0.3785170 0.3542988 0.2737506</span>
<span class="co">#&gt; [5,10)   1.3722186 1.0138366 0.6074381 0.3862649 0.2893094 0.2436898 0.2089011</span>
<span class="co">#&gt; [10,15)  1.0856753 1.1149813 0.7634559 0.4398832 0.2569123 0.1793465 0.1524517</span>
<span class="co">#&gt; [15,20)  0.7882701 1.0268353 0.9339010 0.6222792 0.3403048 0.1880438 0.1323456</span>
<span class="co">#&gt; [20,25)  0.8052241 0.9215855 0.9545276 0.7952361 0.5084250 0.2689561 0.1479731</span>
<span class="co">#&gt; [25,30)  1.1103831 0.9888883 0.9539933 0.8650353 0.6601651 0.4027522 0.2098874</span>
<span class="co">#&gt; [30,35)  1.6186841 1.1819152 0.9733238 0.8671869 0.7445132 0.5548343 0.3363049</span>
<span class="co">#&gt; [35,40)  1.9596398 1.5740979 1.0938205 0.8029042 0.6652442 0.5820494 0.4647908</span>
<span class="co">#&gt; [40,45)  1.9995887 1.9566911 1.4239912 0.8623700 0.5369029 0.4158647 0.3960655</span>
<span class="co">#&gt; [45,50)  1.3316468 1.7623908 1.8038489 1.2104678 0.6137093 0.3248828 0.2506951</span>
<span class="co">#&gt; [50,55)  0.9751106 1.1368912 1.4880948 1.5699792 0.9916572 0.4553989 0.2346633</span>
<span class="co">#&gt; [55,60)  1.1108383 0.9430716 1.0352720 1.3152691 1.2949890 0.7725119 0.3613424</span>
<span class="co">#&gt; [60,65)  1.0313582 0.8987786 0.8024406 0.9044355 1.0833780 1.0204128 0.5805460</span>
<span class="co">#&gt; [65,70)  0.6661759 0.7076566 0.6471832 0.6226472 0.6931918 0.8318381 0.8643965</span>
<span class="co">#&gt; [70,75)  0.5118881 0.5935605 0.5981221 0.5303126 0.4637681 0.4763425 0.6523317</span>
<span class="co">#&gt; [75,Inf) 0.3308714 0.3977107 0.4597393 0.4645347 0.3679315 0.2520145 0.2184655</span>
<span class="co">#&gt;            [70,75)  [75,Inf)</span>
<span class="co">#&gt; [0,5)    0.1651605 0.1224579</span>
<span class="co">#&gt; [5,10)   0.1528953 0.1323486</span>
<span class="co">#&gt; [10,15)  0.1305120 0.1459573</span>
<span class="co">#&gt; [15,20)  0.1137525 0.1763818</span>
<span class="co">#&gt; [20,25)  0.1020738 0.1765812</span>
<span class="co">#&gt; [25,30)  0.1103655 0.1604071</span>
<span class="co">#&gt; [30,35)  0.1686703 0.1804335</span>
<span class="co">#&gt; [35,40)  0.2851983 0.2724635</span>
<span class="co">#&gt; [40,45)  0.3457408 0.4246788</span>
<span class="co">#&gt; [45,50)  0.2556744 0.5111392</span>
<span class="co">#&gt; [50,55)  0.1799627 0.4691389</span>
<span class="co">#&gt; [55,60)  0.1912469 0.3872738</span>
<span class="co">#&gt; [60,65)  0.2699100 0.3406323</span>
<span class="co">#&gt; [65,70)  0.4383509 0.3681673</span>
<span class="co">#&gt; [70,75)  0.8565612 0.5967251</span>
<span class="co">#&gt; [75,Inf) 0.3397385 1.2135275</span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">2021</span><span class="op">-</span><span class="fl">09</span><span class="op">-</span><span class="fl">08</span><span class="op">)</span>
<span class="co"># predict contacts at 1y and 5y resolutions for inspection</span>
<span class="va">synthetic_all_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predict_contacts.html">predict_contacts</a></span><span class="op">(</span>
  model <span class="op">=</span> <span class="va">m_all</span>, 
  population <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>,
  age_breaks <span class="op">=</span> <span class="va">age_breaks_5y</span>
<span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/predictions_to_matrix.html">predictions_to_matrix</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">synthetic_all_5y</span>
<span class="co">#&gt;              [0,5)    [5,10)   [10,15)   [15,20)   [20,25)   [25,30)   [30,35)</span>
<span class="co">#&gt; [0,5)    2.2989327 0.9948659 0.2671869 0.2371729 0.4144397 0.7776610 1.0682154</span>
<span class="co">#&gt; [5,10)   0.9289026 5.9312936 1.6445191 0.3299359 0.2987637 0.6009662 1.1466837</span>
<span class="co">#&gt; [10,15)  0.1570390 1.4514003 8.6763018 1.7927751 0.3224954 0.3467841 0.6561107</span>
<span class="co">#&gt; [15,20)  0.1495915 0.2503761 1.6266039 7.7895389 1.6895610 0.4980788 0.5222627</span>
<span class="co">#&gt; [20,25)  0.3047072 0.2990447 0.3760611 1.3702503 4.8994576 1.7514208 0.8328861</span>
<span class="co">#&gt; [25,30)  0.4323030 0.5047311 0.5180950 0.5904849 1.2389608 2.7857742 1.6748915</span>
<span class="co">#&gt; [30,35)  0.4758144 0.6136944 0.6735841 0.7245552 0.8853001 1.4145785 2.0345581</span>
<span class="co">#&gt; [35,40)  0.4751910 0.7236705 0.7841662 0.7694373 0.8881011 1.2904142 1.8454043</span>
<span class="co">#&gt; [40,45)  0.3621764 0.6758180 0.9047179 0.8694788 0.7956182 0.9758380 1.4907040</span>
<span class="co">#&gt; [45,50)  0.2672879 0.4624337 0.7813928 0.9966340 0.9488859 0.8659994 0.9731161</span>
<span class="co">#&gt; [50,55)  0.2644531 0.3329077 0.4945130 0.7958056 1.0833585 1.1618201 1.0448222</span>
<span class="co">#&gt; [55,60)  0.2771514 0.3419260 0.3585758 0.4630202 0.7306014 1.1134585 1.2837597</span>
<span class="co">#&gt; [60,65)  0.2045419 0.3545927 0.3671301 0.3352447 0.3906167 0.6034432 0.9139625</span>
<span class="co">#&gt; [65,70)  0.1207227 0.2522464 0.3436813 0.3353842 0.3156589 0.3679093 0.5087792</span>
<span class="co">#&gt; [70,75)  0.1132641 0.1655631 0.2181797 0.2649754 0.3012628 0.3470747 0.4184672</span>
<span class="co">#&gt; [75,Inf) 0.2496330 0.2721724 0.1982312 0.1731388 0.1918892 0.2160376 0.2654553</span>
<span class="co">#&gt;            [35,40)   [40,45)   [45,50)   [50,55)   [55,60)   [60,65)   [65,70)</span>
<span class="co">#&gt; [0,5)    0.9435017 0.6460295 0.4559626 0.3865511 0.3785170 0.3542988 0.2737506</span>
<span class="co">#&gt; [5,10)   1.3722186 1.0138366 0.6074381 0.3862649 0.2893094 0.2436898 0.2089011</span>
<span class="co">#&gt; [10,15)  1.0856753 1.1149813 0.7634559 0.4398832 0.2569123 0.1793465 0.1524517</span>
<span class="co">#&gt; [15,20)  0.7882701 1.0268353 0.9339010 0.6222792 0.3403048 0.1880438 0.1323456</span>
<span class="co">#&gt; [20,25)  0.8052241 0.9215855 0.9545276 0.7952361 0.5084250 0.2689561 0.1479731</span>
<span class="co">#&gt; [25,30)  1.1103831 0.9888883 0.9539933 0.8650353 0.6601651 0.4027522 0.2098874</span>
<span class="co">#&gt; [30,35)  1.6186841 1.1819152 0.9733238 0.8671869 0.7445132 0.5548343 0.3363049</span>
<span class="co">#&gt; [35,40)  1.9596398 1.5740979 1.0938205 0.8029042 0.6652442 0.5820494 0.4647908</span>
<span class="co">#&gt; [40,45)  1.9995887 1.9566911 1.4239912 0.8623700 0.5369029 0.4158647 0.3960655</span>
<span class="co">#&gt; [45,50)  1.3316468 1.7623908 1.8038489 1.2104678 0.6137093 0.3248828 0.2506951</span>
<span class="co">#&gt; [50,55)  0.9751106 1.1368912 1.4880948 1.5699792 0.9916572 0.4553989 0.2346633</span>
<span class="co">#&gt; [55,60)  1.1108383 0.9430716 1.0352720 1.3152691 1.2949890 0.7725119 0.3613424</span>
<span class="co">#&gt; [60,65)  1.0313582 0.8987786 0.8024406 0.9044355 1.0833780 1.0204128 0.5805460</span>
<span class="co">#&gt; [65,70)  0.6661759 0.7076566 0.6471832 0.6226472 0.6931918 0.8318381 0.8643965</span>
<span class="co">#&gt; [70,75)  0.5118881 0.5935605 0.5981221 0.5303126 0.4637681 0.4763425 0.6523317</span>
<span class="co">#&gt; [75,Inf) 0.3308714 0.3977107 0.4597393 0.4645347 0.3679315 0.2520145 0.2184655</span>
<span class="co">#&gt;            [70,75)  [75,Inf)</span>
<span class="co">#&gt; [0,5)    0.1651605 0.1224579</span>
<span class="co">#&gt; [5,10)   0.1528953 0.1323486</span>
<span class="co">#&gt; [10,15)  0.1305120 0.1459573</span>
<span class="co">#&gt; [15,20)  0.1137525 0.1763818</span>
<span class="co">#&gt; [20,25)  0.1020738 0.1765812</span>
<span class="co">#&gt; [25,30)  0.1103655 0.1604071</span>
<span class="co">#&gt; [30,35)  0.1686703 0.1804335</span>
<span class="co">#&gt; [35,40)  0.2851983 0.2724635</span>
<span class="co">#&gt; [40,45)  0.3457408 0.4246788</span>
<span class="co">#&gt; [45,50)  0.2556744 0.5111392</span>
<span class="co">#&gt; [50,55)  0.1799627 0.4691389</span>
<span class="co">#&gt; [55,60)  0.1912469 0.3872738</span>
<span class="co">#&gt; [60,65)  0.2699100 0.3406323</span>
<span class="co">#&gt; [65,70)  0.4383509 0.3681673</span>
<span class="co">#&gt; [70,75)  0.8565612 0.5967251</span>
<span class="co">#&gt; [75,Inf) 0.3397385 1.2135275</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_all_5y</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"synthetic all at once"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-matrix-plot-1.png" width="100%"></p>
</div>
<div id="speeding-up-computation-with-future" class="section level2">
<h2 class="hasAnchor">
<a href="#speeding-up-computation-with-future" class="anchor"></a>Speeding up computation with <code>future</code>
</h2>
<p><code>conmat</code> now supports parallelisation, which is useful in a couple of contexts with the model fitting, here is an example:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org">future</a></span><span class="op">)</span>
<span class="fu"><a href="https://future.futureverse.org/reference/plan.html">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<p>We set the future plan, saying multisession, with 4 workers.</p>
<p>Then we run the code as normal:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">polymod_setting_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_polymod_setting_data.html">get_polymod_setting_data</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">polymod_population</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">contact_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_setting_contacts.html">fit_setting_contacts</a></span><span class="op">(</span>
  contact_data_list <span class="op">=</span> <span class="va">polymod_setting_data</span>,
  population <span class="op">=</span> <span class="va">polymod_population</span>
<span class="op">)</span>

<span class="va">contact_model_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predict_setting_contacts.html">predict_setting_contacts</a></span><span class="op">(</span>
  population <span class="op">=</span> <span class="va">polymod_population</span>,
  contact_model <span class="op">=</span> <span class="va">contact_model</span>,
  age_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">75</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Notably this is about 3 times faster than without using that plan.</p>
</div>
<div id="data-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#data-sources" class="anchor"></a>Data sources</h2>
<p>This package provides data for use in calculating contact matrices.</p>
<p>These data are still being cleaned and processed, but their current forms are shown below:</p>
<div id="abs_education_state" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_education_state" class="anchor"></a>abs_education_state</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_education_state</span>
<span class="co">#&gt; # A tibble: 4,194 × 5</span>
<span class="co">#&gt;     year state aboriginal_and_torres_strait_islander_status   age n_full_and_part…</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;                                        &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2006 ACT   Aboriginal and Torres Strait Islander            4                5</span>
<span class="co">#&gt;  2  2006 ACT   Non-Indigenous                                   4              109</span>
<span class="co">#&gt;  3  2006 NSW   Aboriginal and Torres Strait Islander            4              104</span>
<span class="co">#&gt;  4  2006 NSW   Non-Indigenous                                   4             1870</span>
<span class="co">#&gt;  5  2006 NT    Aboriginal and Torres Strait Islander            4              102</span>
<span class="co">#&gt;  6  2006 NT    Non-Indigenous                                   4               63</span>
<span class="co">#&gt;  7  2006 QLD   Aboriginal and Torres Strait Islander            4               37</span>
<span class="co">#&gt;  8  2006 QLD   Non-Indigenous                                   4              740</span>
<span class="co">#&gt;  9  2006 SA    Aboriginal and Torres Strait Islander            4               42</span>
<span class="co">#&gt; 10  2006 SA    Non-Indigenous                                   4             1023</span>
<span class="co">#&gt; # … with 4,184 more rows</span></code></pre></div>
</div>
<div id="abs_education_state_2020" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_education_state_2020" class="anchor"></a>abs_education_state_2020</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_education_state_2020</span>
<span class="co">#&gt; # A tibble: 808 × 6</span>
<span class="co">#&gt;     year state   age population population_interpolated  prop</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;      &lt;dbl&gt;                   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2020 ACT       0          0                   5569. 0    </span>
<span class="co">#&gt;  2  2020 ACT       1          0                   5702. 0    </span>
<span class="co">#&gt;  3  2020 ACT       2          0                   5781. 0    </span>
<span class="co">#&gt;  4  2020 ACT       3          0                   5814. 0    </span>
<span class="co">#&gt;  5  2020 ACT       4          0                   5809. 0    </span>
<span class="co">#&gt;  6  2020 ACT       5       4558                   5772. 0.790</span>
<span class="co">#&gt;  7  2020 ACT       6       6161                   5710. 1.08 </span>
<span class="co">#&gt;  8  2020 ACT       7       6163                   5623. 1.10 </span>
<span class="co">#&gt;  9  2020 ACT       8       5881                   5510. 1.07 </span>
<span class="co">#&gt; 10  2020 ACT       9       5921                   5370. 1.10 </span>
<span class="co">#&gt; # … with 798 more rows</span></code></pre></div>
</div>
<div id="abs_employ_age_lga" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_employ_age_lga" class="anchor"></a>abs_employ_age_lga</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_employ_age_lga</span>
<span class="co">#&gt; # A tibble: 5,600 × 8</span>
<span class="co">#&gt;     year state lga    age_group total_employed total_unemployed total_labour_fo…</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2016 NSW   Albur… 15-19               1527              300             1830</span>
<span class="co">#&gt;  2  2016 NSW   Armid… 15-19                838              217             1055</span>
<span class="co">#&gt;  3  2016 NSW   Balli… 15-19               1064              185             1255</span>
<span class="co">#&gt;  4  2016 NSW   Balra… 15-19                 41                9               46</span>
<span class="co">#&gt;  5  2016 NSW   Bathu… 15-19               1103              241             1341</span>
<span class="co">#&gt;  6  2016 NSW   Bega … 15-19                801               97              897</span>
<span class="co">#&gt;  7  2016 NSW   Belli… 15-19                241               42              281</span>
<span class="co">#&gt;  8  2016 NSW   Berri… 15-19                168               16              181</span>
<span class="co">#&gt;  9  2016 NSW   Black… 15-19               7534             2136             9670</span>
<span class="co">#&gt; 10  2016 NSW   Bland… 15-19                124               14              140</span>
<span class="co">#&gt; # … with 5,590 more rows, and 1 more variable: total &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="abs_household_lga" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_household_lga" class="anchor"></a>abs_household_lga</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_household_lga</span>
<span class="co">#&gt; # A tibble: 4,968 × 5</span>
<span class="co">#&gt;     year state lga                   n_persons_usually_resident n_households</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;                 &lt;chr&gt;                             &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2016 NSW   Albury (C)            total                             19495</span>
<span class="co">#&gt;  2  2016 NSW   Albury (C)            1                                  6020</span>
<span class="co">#&gt;  3  2016 NSW   Albury (C)            2                                  6738</span>
<span class="co">#&gt;  4  2016 NSW   Albury (C)            3                                  2740</span>
<span class="co">#&gt;  5  2016 NSW   Albury (C)            4                                  2541</span>
<span class="co">#&gt;  6  2016 NSW   Albury (C)            5                                  1041</span>
<span class="co">#&gt;  7  2016 NSW   Albury (C)            6                                   311</span>
<span class="co">#&gt;  8  2016 NSW   Albury (C)            7                                    56</span>
<span class="co">#&gt;  9  2016 NSW   Albury (C)            8+                                   42</span>
<span class="co">#&gt; 10  2016 NSW   Armidale Regional (A) total                             10276</span>
<span class="co">#&gt; # … with 4,958 more rows</span></code></pre></div>
</div>
<div id="abs_pop_age_lga_2016" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_pop_age_lga_2016" class="anchor"></a>abs_pop_age_lga_2016</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_pop_age_lga_2016</span>
<span class="co">#&gt; # A tibble: 9,792 × 5</span>
<span class="co">#&gt;     year state lga                age_group population</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;              &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2016 ACT   Unincorporated ACT 0-4            28054</span>
<span class="co">#&gt;  2  2016 ACT   Unincorporated ACT 5-9            25767</span>
<span class="co">#&gt;  3  2016 ACT   Unincorporated ACT 10-14          22170</span>
<span class="co">#&gt;  4  2016 ACT   Unincorporated ACT 15-19          24906</span>
<span class="co">#&gt;  5  2016 ACT   Unincorporated ACT 20-24          32615</span>
<span class="co">#&gt;  6  2016 ACT   Unincorporated ACT 25-29          34243</span>
<span class="co">#&gt;  7  2016 ACT   Unincorporated ACT 30-34          34574</span>
<span class="co">#&gt;  8  2016 ACT   Unincorporated ACT 35-39          30340</span>
<span class="co">#&gt;  9  2016 ACT   Unincorporated ACT 40-44          28387</span>
<span class="co">#&gt; 10  2016 ACT   Unincorporated ACT 45-49          26431</span>
<span class="co">#&gt; # … with 9,782 more rows</span></code></pre></div>
</div>
<div id="abs_pop_age_lga_2020" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_pop_age_lga_2020" class="anchor"></a>abs_pop_age_lga_2020</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_pop_age_lga_2020</span>
<span class="co">#&gt; # A tibble: 9,774 × 5</span>
<span class="co">#&gt;     year state lga                age_group population</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;              &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2020 ACT   Unincorporated ACT 0-4            27861</span>
<span class="co">#&gt;  2  2020 ACT   Unincorporated ACT 5-9            28871</span>
<span class="co">#&gt;  3  2020 ACT   Unincorporated ACT 10-14          26015</span>
<span class="co">#&gt;  4  2020 ACT   Unincorporated ACT 15-19          23867</span>
<span class="co">#&gt;  5  2020 ACT   Unincorporated ACT 20-24          32626</span>
<span class="co">#&gt;  6  2020 ACT   Unincorporated ACT 25-29          33992</span>
<span class="co">#&gt;  7  2020 ACT   Unincorporated ACT 30-34          35734</span>
<span class="co">#&gt;  8  2020 ACT   Unincorporated ACT 35-39          35354</span>
<span class="co">#&gt;  9  2020 ACT   Unincorporated ACT 40-44          30155</span>
<span class="co">#&gt; 10  2020 ACT   Unincorporated ACT 45-49          29103</span>
<span class="co">#&gt; # … with 9,764 more rows</span></code></pre></div>
</div>
<div id="abs_state_age" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_state_age" class="anchor"></a>abs_state_age</h3>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_state_age</span>
<span class="co">#&gt; # A tibble: 168 × 3</span>
<span class="co">#&gt;    state age_group population</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 NSW   0-4           495060</span>
<span class="co">#&gt;  2 VIC   0-4           401992</span>
<span class="co">#&gt;  3 QLD   0-4           314592</span>
<span class="co">#&gt;  4 SA    0-4            98400</span>
<span class="co">#&gt;  5 WA    0-4           171531</span>
<span class="co">#&gt;  6 TAS   0-4            29258</span>
<span class="co">#&gt;  7 NT    0-4            17766</span>
<span class="co">#&gt;  8 ACT   0-4            27846</span>
<span class="co">#&gt;  9 NSW   5-9           512687</span>
<span class="co">#&gt; 10 VIC   5-9           416633</span>
<span class="co">#&gt; # … with 158 more rows</span></code></pre></div>
</div>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the conmat project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Learn more at <br><a href="https://github.com/njtierney/conmat">https://​github.com/​njtierney/​conmat</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Tierney <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0003-1460-8722" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Nick Golding <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8916-5570" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://codecov.io/gh/njtierney/conmat?branch=master"><img src="https://codecov.io/gh/njtierney/conmat/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/njtierney/conmat/actions"><img src="https://github.com/njtierney/conmat/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Nick Golding.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
