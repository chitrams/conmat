<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Builds contact matrices using GAMs and population data • conmat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Builds contact matrices using GAMs and population data">
<meta property="og:description" content="Builds contact matrices using GAMs and population data. This package 
  incorporates data that is copyright Commonwealth of Australia (Australian 
  Electoral Commission and Australian Bureau of Statistics) 2020.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">conmat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/getting-started.html">Getting Started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="conmat" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#conmat" class="anchor"></a>conmat</h1></div>
<!-- badges: start -->

<p>The goal of conmat is to provide methods for producing contact matrices.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"conmat"</span>, repos <span class="op">=</span> <span class="st">"https://njtierney.r-universe.dev"</span><span class="op">)</span></code></pre></div>
<p>Or alternatively you can use <code>remotes</code> (although I recommend using the above code)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"njtierney/conmat"</span><span class="op">)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>We can extract out the ABS age population data using <code>abs_age_lga</code> like so:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">conmat</span><span class="op">)</span>
<span class="va">sydney_age_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/abs_age_lga.html">abs_age_lga</a></span><span class="op">(</span><span class="st">"Sydney (C)"</span><span class="op">)</span>
<span class="va">sydney_age_pop</span>
<span class="co">#&gt; # A tibble: 18 × 4</span>
<span class="co">#&gt;    lga        lower.age.limit  year population</span>
<span class="co">#&gt;    &lt;chr&gt;                &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Sydney (C)               0  2020       9109</span>
<span class="co">#&gt;  2 Sydney (C)               5  2020       5034</span>
<span class="co">#&gt;  3 Sydney (C)              10  2020       3718</span>
<span class="co">#&gt;  4 Sydney (C)              15  2020       7492</span>
<span class="co">#&gt;  5 Sydney (C)              20  2020      31981</span>
<span class="co">#&gt;  6 Sydney (C)              25  2020      45686</span>
<span class="co">#&gt;  7 Sydney (C)              30  2020      38333</span>
<span class="co">#&gt;  8 Sydney (C)              35  2020      25550</span>
<span class="co">#&gt;  9 Sydney (C)              40  2020      15768</span>
<span class="co">#&gt; 10 Sydney (C)              45  2020      12843</span>
<span class="co">#&gt; 11 Sydney (C)              50  2020      10964</span>
<span class="co">#&gt; 12 Sydney (C)              55  2020      10532</span>
<span class="co">#&gt; 13 Sydney (C)              60  2020       8950</span>
<span class="co">#&gt; 14 Sydney (C)              65  2020       7377</span>
<span class="co">#&gt; 15 Sydney (C)              70  2020       6308</span>
<span class="co">#&gt; 16 Sydney (C)              75  2020       4002</span>
<span class="co">#&gt; 17 Sydney (C)              80  2020       2583</span>
<span class="co">#&gt; 18 Sydney (C)              85  2020       2506</span></code></pre></div>
<p>Note that you need to use the exact LGA name - you can look up LGA names in the data set <code>abs_lga_lookup</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_lga_lookup</span>
<span class="co">#&gt; # A tibble: 545 × 3</span>
<span class="co">#&gt;    state lga_code lga                  </span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                </span>
<span class="co">#&gt;  1 NSW      10050 Albury (C)           </span>
<span class="co">#&gt;  2 NSW      10180 Armidale Regional (A)</span>
<span class="co">#&gt;  3 NSW      10250 Ballina (A)          </span>
<span class="co">#&gt;  4 NSW      10300 Balranald (A)        </span>
<span class="co">#&gt;  5 NSW      10470 Bathurst Regional (A)</span>
<span class="co">#&gt;  6 NSW      10500 Bayside (A)          </span>
<span class="co">#&gt;  7 NSW      10550 Bega Valley (A)      </span>
<span class="co">#&gt;  8 NSW      10600 Bellingen (A)        </span>
<span class="co">#&gt;  9 NSW      10650 Berrigan (A)         </span>
<span class="co">#&gt; 10 NSW      10750 Blacktown (C)        </span>
<span class="co">#&gt; # … with 535 more rows</span></code></pre></div>
<p>We can then extrapolate this data from polymod and plot a matrix, below:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">synthetic_settings_5y_sydney</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/extrapolate_polymod.html">extrapolate_polymod</a></span><span class="op">(</span>
  population <span class="op">=</span> <span class="va">sydney_age_pop</span>,
  age_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">85</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">synthetic_settings_5y_sydney</span>
<span class="co">#&gt; $home</span>
<span class="co">#&gt;               (0,5]     (5,10]    (10,15]    (15,20]    (20,25]    (25,30]</span>
<span class="co">#&gt; (0,5]    0.43531520 0.26532605 0.16953877 0.19547464 0.32708077 0.55340199</span>
<span class="co">#&gt; (5,10]   0.29990865 0.49184285 0.30783659 0.17786172 0.15165170 0.24351529</span>
<span class="co">#&gt; (10,15]  0.12736878 0.26899432 0.53762301 0.37736186 0.16196904 0.11853128</span>
<span class="co">#&gt; (15,20]  0.09550696 0.10370259 0.26004236 0.62400699 0.34962383 0.12698715</span>
<span class="co">#&gt; (20,25]  0.15585880 0.07442459 0.10170625 0.30212285 0.61718636 0.29926640</span>
<span class="co">#&gt; (25,30]  0.32288282 0.13306422 0.07686004 0.11592468 0.31521425 0.61428082</span>
<span class="co">#&gt; (30,35]  0.42153704 0.31479002 0.15356431 0.09688868 0.12537312 0.31288468</span>
<span class="co">#&gt; (35,40]  0.27639644 0.42683486 0.34836629 0.18946139 0.10846710 0.12809427</span>
<span class="co">#&gt; (40,45]  0.13026205 0.26632473 0.42605349 0.38589016 0.19776407 0.11131507</span>
<span class="co">#&gt; (45,50]  0.09391301 0.12509354 0.25185368 0.41904745 0.34684496 0.18240330</span>
<span class="co">#&gt; (50,55]  0.11463375 0.09078302 0.12186630 0.24553393 0.35719447 0.29745015</span>
<span class="co">#&gt; (55,60]  0.14699406 0.11040627 0.09119308 0.12600070 0.22063019 0.31271151</span>
<span class="co">#&gt; (60,65]  0.13490085 0.13215030 0.10373225 0.09199810 0.11454279 0.19812317</span>
<span class="co">#&gt; (65,70]  0.09537822 0.11086380 0.11278775 0.09762713 0.08052396 0.10280571</span>
<span class="co">#&gt; (70,75]  0.08040125 0.08286277 0.09979913 0.10987708 0.08787313 0.07737376</span>
<span class="co">#&gt; (75,80]  0.09430032 0.08394166 0.09075274 0.11534841 0.11383904 0.09459162</span>
<span class="co">#&gt; (80,85]  0.11456295 0.11912127 0.11413210 0.12898175 0.14290821 0.14481783</span>
<span class="co">#&gt; (85,Inf] 0.11102848 0.14974167 0.16746179 0.17324699 0.17188663 0.19476255</span>
<span class="co">#&gt;             (30,35]    (35,40]    (40,45]    (45,50]    (50,55]    (55,60]</span>
<span class="co">#&gt; (0,5]    0.63636194 0.43644276 0.23275864 0.15793018 0.15392037 0.15294916</span>
<span class="co">#&gt; (5,10]   0.47905249 0.61731307 0.41770182 0.19258631 0.10899995 0.09990068</span>
<span class="co">#&gt; (10,15]  0.19918401 0.41917128 0.56387719 0.37239502 0.15300962 0.07345327</span>
<span class="co">#&gt; (15,20]  0.09218670 0.15634665 0.33104612 0.43080939 0.26733709 0.10245290</span>
<span class="co">#&gt; (20,25]  0.10783079 0.07931031 0.13484136 0.26775028 0.31364439 0.17728921</span>
<span class="co">#&gt; (25,30]  0.29001744 0.10469087 0.07357113 0.11671787 0.21431501 0.23080306</span>
<span class="co">#&gt; (30,35]  0.58348762 0.27968083 0.10437730 0.07119252 0.10451716 0.17575864</span>
<span class="co">#&gt; (35,40]  0.29304312 0.49664514 0.24243168 0.09486331 0.06529953 0.09095325</span>
<span class="co">#&gt; (40,45]  0.12866925 0.26275989 0.41730411 0.20669238 0.08038391 0.05420814</span>
<span class="co">#&gt; (45,50]  0.11343861 0.13364928 0.25981620 0.39510359 0.18500786 0.06760884</span>
<span class="co">#&gt; (50,55]  0.17343714 0.11705057 0.14048051 0.26961682 0.41246388 0.18312518</span>
<span class="co">#&gt; (55,60]  0.27572089 0.17047623 0.12008602 0.14657029 0.28428353 0.42921102</span>
<span class="co">#&gt; (60,65]  0.29338723 0.26461960 0.16495446 0.11648238 0.14194127 0.27220873</span>
<span class="co">#&gt; (65,70]  0.18698177 0.27343271 0.23841019 0.14585283 0.10310238 0.12581997</span>
<span class="co">#&gt; (70,75]  0.10903610 0.19320881 0.25859615 0.20870540 0.12476467 0.09101152</span>
<span class="co">#&gt; (75,80]  0.09117025 0.12673228 0.20556161 0.24934663 0.18885389 0.11100963</span>
<span class="co">#&gt; (80,85]  0.13259100 0.12936249 0.16811057 0.25012960 0.28879988 0.21477235</span>
<span class="co">#&gt; (85,Inf] 0.22062345 0.21481996 0.20966903 0.26193696 0.38249637 0.45052292</span>
<span class="co">#&gt;             (60,65]    (65,70]    (70,75]    (75,80]    (80,85]    (85,Inf]</span>
<span class="co">#&gt; (0,5]    0.11911075 0.07701781 0.04770102 0.02753525 0.01250444 0.004147233</span>
<span class="co">#&gt; (5,10]   0.10474142 0.08883228 0.05695766 0.03173779 0.01640044 0.006518081</span>
<span class="co">#&gt; (10,15]  0.05977998 0.06187034 0.05203337 0.03093182 0.01519969 0.006691124</span>
<span class="co">#&gt; (15,20]  0.04555013 0.03617438 0.03656890 0.02823523 0.01476761 0.006096689</span>
<span class="co">#&gt; (20,25]  0.06431837 0.02997976 0.02535984 0.02416168 0.01633422 0.007014795</span>
<span class="co">#&gt; (25,30]  0.11966885 0.04354995 0.02273744 0.01945008 0.01714415 0.009620242</span>
<span class="co">#&gt; (30,35]  0.17235622 0.08652004 0.03390884 0.01801001 0.01490987 0.011230520</span>
<span class="co">#&gt; (35,40]  0.13940981 0.13065070 0.06791986 0.02609674 0.01330602 0.009576107</span>
<span class="co">#&gt; (40,45]  0.06998259 0.10311494 0.09996371 0.05043726 0.01850445 0.008238086</span>
<span class="co">#&gt; (45,50]  0.04220042 0.05167070 0.07581114 0.06883978 0.03287883 0.010933251</span>
<span class="co">#&gt; (50,55]  0.05924975 0.03367385 0.03938714 0.05227736 0.04359508 0.018600730</span>
<span class="co">#&gt; (55,60]  0.17549360 0.05415561 0.03011173 0.03085806 0.03554983 0.025010199</span>
<span class="co">#&gt; (60,65]  0.39393891 0.16365337 0.05357149 0.02714347 0.02370301 0.022052669</span>
<span class="co">#&gt; (65,70]  0.23339518 0.33948658 0.15271507 0.04990166 0.02276488 0.015940928</span>
<span class="co">#&gt; (70,75]  0.11355086 0.21017493 0.28791131 0.12815944 0.04105278 0.016074675</span>
<span class="co">#&gt; (75,80]  0.08115887 0.10378956 0.18383098 0.23351458 0.10284486 0.030018590</span>
<span class="co">#&gt; (80,85]  0.12261445 0.08665590 0.10129041 0.15675819 0.18033575 0.075010051</span>
<span class="co">#&gt; (85,Inf] 0.33989819 0.19222954 0.12016521 0.11048979 0.13269354 0.125247599</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $work</span>
<span class="co">#&gt;                (0,5]       (5,10]      (10,15]      (15,20]     (20,25]</span>
<span class="co">#&gt; (0,5]    0.005119231 0.0015804516 0.0007649752 0.0012204472 0.002033357</span>
<span class="co">#&gt; (5,10]   0.001737913 0.0028203861 0.0017805313 0.0022369161 0.002639329</span>
<span class="co">#&gt; (10,15]  0.002211563 0.0035163641 0.0120229542 0.0231459356 0.021402858</span>
<span class="co">#&gt; (15,20]  0.011579645 0.0132282293 0.0347234624 0.1914711969 0.226915438</span>
<span class="co">#&gt; (20,25]  0.035270484 0.0334630937 0.0589821276 0.2409225088 0.672284055</span>
<span class="co">#&gt; (25,30]  0.052646101 0.0499387273 0.0761303107 0.2194252525 0.538271412</span>
<span class="co">#&gt; (30,35]  0.051650886 0.0509390112 0.0785399649 0.2140610499 0.439761653</span>
<span class="co">#&gt; (35,40]  0.049563156 0.0512071038 0.0798312656 0.2209083084 0.453495634</span>
<span class="co">#&gt; (40,45]  0.047491148 0.0513643915 0.0800805390 0.2166049639 0.438491188</span>
<span class="co">#&gt; (45,50]  0.042116180 0.0481090136 0.0760283154 0.1988093668 0.385157903</span>
<span class="co">#&gt; (50,55]  0.031497135 0.0401919786 0.0662084528 0.1708825690 0.315283709</span>
<span class="co">#&gt; (55,60]  0.015945323 0.0248246148 0.0457012240 0.1208088400 0.213753118</span>
<span class="co">#&gt; (60,65]  0.005054586 0.0094344055 0.0212105048 0.0624533699 0.109079287</span>
<span class="co">#&gt; (65,70]  0.001718439 0.0030038627 0.0079370617 0.0285739717 0.054225997</span>
<span class="co">#&gt; (70,75]  0.001477120 0.0016025014 0.0037339888 0.0156058374 0.036854764</span>
<span class="co">#&gt; (75,80]  0.002754966 0.0016793047 0.0023403259 0.0080915573 0.021058779</span>
<span class="co">#&gt; (80,85]  0.003326093 0.0016984243 0.0014624099 0.0030951150 0.006390736</span>
<span class="co">#&gt; (85,Inf] 0.001405364 0.0008181698 0.0006392203 0.0009522849 0.001316210</span>
<span class="co">#&gt;              (25,30]     (30,35]     (35,40]     (40,45]      (45,50]</span>
<span class="co">#&gt; (0,5]    0.002875708 0.003318842 0.003251425 0.003244150 0.0034235212</span>
<span class="co">#&gt; (5,10]   0.002728197 0.002719477 0.002540565 0.002388985 0.0022969466</span>
<span class="co">#&gt; (10,15]  0.016678055 0.013375663 0.011482107 0.010554930 0.0095906398</span>
<span class="co">#&gt; (15,20]  0.152660482 0.105736262 0.080496016 0.070621443 0.0637887779</span>
<span class="co">#&gt; (20,25]  0.597536575 0.395482586 0.280858262 0.229890719 0.2000052606</span>
<span class="co">#&gt; (25,30]  0.865165345 0.677250880 0.476728375 0.379375581 0.3171987265</span>
<span class="co">#&gt; (30,35]  0.651595875 0.709231684 0.551713499 0.437195955 0.3627330161</span>
<span class="co">#&gt; (35,40]  0.640046217 0.688706423 0.629325312 0.517440340 0.4210941589</span>
<span class="co">#&gt; (40,45]  0.614730295 0.662576927 0.633255770 0.596995989 0.4839856216</span>
<span class="co">#&gt; (45,50]  0.522103219 0.548902218 0.521244626 0.520571795 0.5092424993</span>
<span class="co">#&gt; (50,55]  0.409655661 0.421070699 0.391683953 0.384271060 0.3981590423</span>
<span class="co">#&gt; (55,60]  0.260330730 0.260209697 0.245924409 0.244066692 0.2502829949</span>
<span class="co">#&gt; (60,65]  0.122312183 0.111853214 0.102783615 0.106405774 0.1134696229</span>
<span class="co">#&gt; (65,70]  0.059354517 0.048931539 0.039777272 0.038966661 0.0423142792</span>
<span class="co">#&gt; (70,75]  0.046596699 0.038099793 0.027256784 0.022912977 0.0223007028</span>
<span class="co">#&gt; (75,80]  0.032641220 0.030807801 0.021671918 0.015818577 0.0129866462</span>
<span class="co">#&gt; (80,85]  0.010123796 0.011087878 0.008744192 0.006245733 0.0045417536</span>
<span class="co">#&gt; (85,Inf] 0.001618327 0.001685040 0.001422054 0.001077982 0.0007697545</span>
<span class="co">#&gt;               (50,55]      (55,60]      (60,65]      (65,70]      (70,75]</span>
<span class="co">#&gt; (0,5]    0.0033332064 0.0025136320 1.348586e-03 5.892991e-04 2.356209e-04</span>
<span class="co">#&gt; (5,10]   0.0021021737 0.0016830928 1.111016e-03 6.413352e-04 3.087367e-04</span>
<span class="co">#&gt; (10,15]  0.0077914278 0.0055411897 3.613946e-03 2.452052e-03 1.588405e-03</span>
<span class="co">#&gt; (15,20]  0.0501871587 0.0324559430 1.854294e-02 1.174935e-02 8.521727e-03</span>
<span class="co">#&gt; (20,25]  0.1557416645 0.0982856815 5.108998e-02 2.797968e-02 1.940530e-02</span>
<span class="co">#&gt; (25,30]  0.2383382668 0.1480444675 7.420595e-02 3.688948e-02 2.307219e-02</span>
<span class="co">#&gt; (30,35]  0.2674656732 0.1623780742 8.078940e-02 3.974044e-02 2.363167e-02</span>
<span class="co">#&gt; (35,40]  0.3089008649 0.1876814677 9.359037e-02 4.714889e-02 2.899947e-02</span>
<span class="co">#&gt; (40,45]  0.3405625767 0.2039747850 1.029272e-01 5.343800e-02 3.503103e-02</span>
<span class="co">#&gt; (45,50]  0.3559300351 0.2001413535 9.717940e-02 5.027491e-02 3.387047e-02</span>
<span class="co">#&gt; (50,55]  0.3586660796 0.2025964545 9.077569e-02 4.378357e-02 2.805483e-02</span>
<span class="co">#&gt; (55,60]  0.2390441233 0.1809716507 8.247109e-02 3.658502e-02 2.143885e-02</span>
<span class="co">#&gt; (60,65]  0.1089230347 0.0885037371 5.665740e-02 2.659051e-02 1.450108e-02</span>
<span class="co">#&gt; (65,70]  0.0416684385 0.0338037516 2.421241e-02 1.747009e-02 9.882804e-03</span>
<span class="co">#&gt; (70,75]  0.0208489196 0.0163175115 1.126152e-02 8.913385e-03 7.665414e-03</span>
<span class="co">#&gt; (75,80]  0.0103481117 0.0071473942 4.368324e-03 3.109310e-03 2.990675e-03</span>
<span class="co">#&gt; (80,85]  0.0030484307 0.0017206277 8.536336e-04 4.909158e-04 3.938823e-04</span>
<span class="co">#&gt; (85,Inf] 0.0004763989 0.0002325101 9.100472e-05 3.840451e-05 2.249607e-05</span>
<span class="co">#&gt;               (75,80]      (80,85]     (85,Inf]</span>
<span class="co">#&gt; (0,5]    9.817367e-05 5.794504e-05 5.883596e-05</span>
<span class="co">#&gt; (5,10]   1.218940e-04 4.945480e-05 2.933952e-05</span>
<span class="co">#&gt; (10,15]  8.288930e-04 3.640579e-04 1.578411e-04</span>
<span class="co">#&gt; (15,20]  5.763901e-03 3.384503e-03 1.688701e-03</span>
<span class="co">#&gt; (20,25]  1.437842e-02 1.051980e-02 6.800110e-03</span>
<span class="co">#&gt; (25,30]  1.653328e-02 1.333715e-02 1.068206e-02</span>
<span class="co">#&gt; (30,35]  1.558912e-02 1.233987e-02 1.107778e-02</span>
<span class="co">#&gt; (35,40]  1.916173e-02 1.467520e-02 1.327897e-02</span>
<span class="co">#&gt; (40,45]  2.541092e-02 2.087715e-02 1.948847e-02</span>
<span class="co">#&gt; (45,50]  2.648851e-02 2.476553e-02 2.635983e-02</span>
<span class="co">#&gt; (50,55]  2.139668e-02 2.085309e-02 2.541845e-02</span>
<span class="co">#&gt; (55,60]  1.478216e-02 1.295884e-02 1.529277e-02</span>
<span class="co">#&gt; (60,65]  9.217277e-03 7.168206e-03 7.109331e-03</span>
<span class="co">#&gt; (65,70]  5.981744e-03 4.501794e-03 4.141594e-03</span>
<span class="co">#&gt; (70,75]  4.689883e-03 3.357059e-03 3.148492e-03</span>
<span class="co">#&gt; (75,80]  3.067922e-03 2.078314e-03 1.772487e-03</span>
<span class="co">#&gt; (80,85]  4.782857e-04 6.209637e-04 4.556029e-04</span>
<span class="co">#&gt; (85,Inf] 2.128544e-05 3.604907e-05 6.006479e-05</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $school</span>
<span class="co">#&gt;                (0,5]       (5,10]      (10,15]      (15,20]      (20,25]</span>
<span class="co">#&gt; (0,5]    10.89847994  2.836980098 2.845660e-01 3.521365e-02 2.799880e-02</span>
<span class="co">#&gt; (5,10]    2.63518337 63.645473571 8.672634e+00 7.524304e-02 3.688192e-02</span>
<span class="co">#&gt; (10,15]   0.07484330  4.805854965 7.366072e+01 2.176867e+00 3.172335e-02</span>
<span class="co">#&gt; (15,20]   0.14256134  0.267680880 2.164681e+00 5.754298e+00 2.489627e-01</span>
<span class="co">#&gt; (20,25]   0.34350029  0.585677630 4.693693e-01 2.172336e-01 4.600863e-01</span>
<span class="co">#&gt; (25,30]   0.38630641  1.065048636 9.518164e-01 1.087453e-01 4.316237e-02</span>
<span class="co">#&gt; (30,35]   0.40975941  1.082917648 1.162317e+00 1.656312e-01 3.510612e-02</span>
<span class="co">#&gt; (35,40]   0.56079563  1.383898399 1.182525e+00 1.451500e-01 3.222651e-02</span>
<span class="co">#&gt; (40,45]   0.66205414  1.938983318 1.664401e+00 1.597325e-01 2.203094e-02</span>
<span class="co">#&gt; (45,50]   0.78469602  2.494490426 2.382406e+00 2.524034e-01 3.037918e-02</span>
<span class="co">#&gt; (50,55]   0.87945510  2.655825770 2.351300e+00 2.607187e-01 3.952622e-02</span>
<span class="co">#&gt; (55,60]   0.60346198  1.855920489 1.352881e+00 1.176340e-01 1.718712e-02</span>
<span class="co">#&gt; (60,65]   0.14838869  0.608462168 4.586098e-01 3.375404e-02 4.604026e-03</span>
<span class="co">#&gt; (65,70]   0.02223164  0.101846582 1.007257e-01 8.628137e-03 2.053168e-03</span>
<span class="co">#&gt; (70,75]   0.01482314  0.025914357 1.826034e-02 1.417283e-03 3.815406e-04</span>
<span class="co">#&gt; (75,80]   0.04216643  0.010265168 2.795877e-03 1.177294e-04 2.261999e-05</span>
<span class="co">#&gt; (80,85]   0.12884770  0.004646234 2.383232e-04 3.027341e-06 2.060942e-07</span>
<span class="co">#&gt; (85,Inf]  0.09667585  0.003320702 4.089051e-05 8.899215e-08 1.038967e-09</span>
<span class="co">#&gt;               (25,30]      (30,35]      (35,40]      (40,45]      (45,50]</span>
<span class="co">#&gt; (0,5]    6.063979e-02 1.451695e-01 2.874024e-01 3.404393e-01 2.278259e-01</span>
<span class="co">#&gt; (5,10]   1.213441e-01 3.478960e-01 6.069490e-01 7.111354e-01 6.799762e-01</span>
<span class="co">#&gt; (10,15]  6.399576e-02 2.676013e-01 6.248847e-01 6.848696e-01 6.007231e-01</span>
<span class="co">#&gt; (15,20]  4.960229e-02 1.483631e-01 4.466147e-01 6.020497e-01 4.858594e-01</span>
<span class="co">#&gt; (20,25]  7.933695e-02 6.680403e-02 1.617266e-01 2.642987e-01 2.411399e-01</span>
<span class="co">#&gt; (25,30]  9.940824e-02 7.561203e-02 8.611797e-02 1.262062e-01 1.439023e-01</span>
<span class="co">#&gt; (30,35]  4.989083e-02 1.064821e-01 1.165673e-01 9.907835e-02 9.541214e-02</span>
<span class="co">#&gt; (35,40]  4.649529e-02 1.148305e-01 1.622008e-01 1.417063e-01 8.280350e-02</span>
<span class="co">#&gt; (40,45]  2.549740e-02 8.213544e-02 1.949596e-01 2.003247e-01 1.392084e-01</span>
<span class="co">#&gt; (45,50]  2.021551e-02 4.154931e-02 1.179148e-01 2.211821e-01 2.048167e-01</span>
<span class="co">#&gt; (50,55]  2.965736e-02 4.410288e-02 7.173327e-02 1.292066e-01 2.059114e-01</span>
<span class="co">#&gt; (55,60]  1.756364e-02 3.526754e-02 5.428172e-02 6.278984e-02 9.143478e-02</span>
<span class="co">#&gt; (60,65]  4.845125e-03 1.339170e-02 3.166235e-02 4.112343e-02 4.216852e-02</span>
<span class="co">#&gt; (65,70]  2.545330e-03 6.757347e-03 2.160961e-02 4.444709e-02 5.314548e-02</span>
<span class="co">#&gt; (70,75]  6.695867e-04 2.397929e-03 9.712782e-03 2.914833e-02 5.229904e-02</span>
<span class="co">#&gt; (75,80]  4.628683e-05 2.823104e-04 1.908031e-03 8.678416e-03 2.525327e-02</span>
<span class="co">#&gt; (80,85]  2.378232e-07 1.577740e-06 1.869160e-05 1.430525e-04 6.666105e-04</span>
<span class="co">#&gt; (85,Inf] 2.334086e-10 5.234997e-10 5.029111e-09 5.592050e-08 3.971608e-07</span>
<span class="co">#&gt;               (50,55]      (55,60]      (60,65]      (65,70]      (70,75]</span>
<span class="co">#&gt; (0,5]    1.074506e-01 5.490329e-02 4.093094e-02 2.392548e-02 9.946391e-03</span>
<span class="co">#&gt; (5,10]   4.370414e-01 1.702582e-01 6.584796e-02 3.164190e-02 1.665073e-02</span>
<span class="co">#&gt; (10,15]  4.752866e-01 2.242189e-01 7.343843e-02 2.513866e-02 1.273710e-02</span>
<span class="co">#&gt; (15,20]  3.442854e-01 1.773190e-01 6.287849e-02 1.754932e-02 5.688563e-03</span>
<span class="co">#&gt; (20,25]  1.558563e-01 7.544799e-02 3.516484e-02 1.394029e-02 2.867048e-03</span>
<span class="co">#&gt; (25,30]  1.051526e-01 4.932876e-02 2.711420e-02 1.581780e-02 2.957620e-03</span>
<span class="co">#&gt; (30,35]  8.344713e-02 4.835388e-02 3.129970e-02 2.383105e-02 6.468312e-03</span>
<span class="co">#&gt; (35,40]  4.891577e-02 2.812957e-02 2.290022e-02 2.549888e-02 1.196264e-02</span>
<span class="co">#&gt; (40,45]  5.590980e-02 1.608206e-02 9.043577e-03 1.141885e-02 8.982582e-03</span>
<span class="co">#&gt; (45,50]  1.248552e-01 3.109640e-02 8.110804e-03 5.182391e-03 3.575100e-03</span>
<span class="co">#&gt; (50,55]  1.677858e-01 7.614903e-02 2.220554e-02 7.565318e-03 2.397899e-03</span>
<span class="co">#&gt; (55,60]  1.215641e-01 7.394011e-02 3.631349e-02 1.332728e-02 2.645720e-03</span>
<span class="co">#&gt; (60,65]  5.216318e-02 5.653910e-02 4.694729e-02 1.710493e-02 2.520227e-03</span>
<span class="co">#&gt; (65,70]  4.426901e-02 3.735362e-02 4.427439e-02 4.337625e-02 7.134891e-03</span>
<span class="co">#&gt; (70,75]  4.381433e-02 1.883305e-02 1.051669e-02 1.970099e-02 5.283864e-02</span>
<span class="co">#&gt; (75,80]  3.129670e-02 1.259982e-02 2.806404e-03 1.405768e-03 1.088169e-02</span>
<span class="co">#&gt; (80,85]  1.447453e-03 9.603913e-04 2.101233e-04 3.615726e-05 4.749391e-05</span>
<span class="co">#&gt; (85,Inf] 1.234109e-06 1.413423e-06 6.137645e-07 1.299875e-07 6.273508e-08</span>
<span class="co">#&gt;               (75,80]      (80,85]     (85,Inf]</span>
<span class="co">#&gt; (0,5]    4.019359e-03 1.469713e-03 3.060341e-04</span>
<span class="co">#&gt; (5,10]   5.934022e-03 7.671884e-04 5.191527e-05</span>
<span class="co">#&gt; (10,15]  6.614233e-03 9.258226e-04 2.052773e-05</span>
<span class="co">#&gt; (15,20]  3.296337e-03 7.275247e-04 1.886296e-05</span>
<span class="co">#&gt; (20,25]  1.124927e-03 2.871903e-04 1.236012e-05</span>
<span class="co">#&gt; (25,30]  7.592910e-04 1.402416e-04 7.314490e-06</span>
<span class="co">#&gt; (30,35]  1.889886e-03 2.931876e-04 1.380580e-05</span>
<span class="co">#&gt; (35,40]  6.389533e-03 1.511061e-03 8.337812e-05</span>
<span class="co">#&gt; (40,45]  9.508134e-03 4.575000e-03 4.816555e-04</span>
<span class="co">#&gt; (45,50]  5.163170e-03 4.163836e-03 8.260029e-04</span>
<span class="co">#&gt; (50,55]  2.210854e-03 1.579585e-03 3.663173e-04</span>
<span class="co">#&gt; (55,60]  1.485674e-03 6.469293e-04 9.053457e-05</span>
<span class="co">#&gt; (60,65]  9.979746e-04 3.693693e-04 3.975135e-05</span>
<span class="co">#&gt; (65,70]  1.025943e-03 2.702566e-04 3.474684e-05</span>
<span class="co">#&gt; (70,75]  8.343722e-03 4.109774e-04 3.262718e-05</span>
<span class="co">#&gt; (75,80]  4.855125e-02 2.644064e-03 2.520205e-05</span>
<span class="co">#&gt; (80,85]  1.312308e-03 3.993319e-03 3.197655e-05</span>
<span class="co">#&gt; (85,Inf] 3.290736e-07 8.335756e-06 1.394218e-05</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $other</span>
<span class="co">#&gt;               (0,5]     (5,10]    (10,15]    (15,20]    (20,25]    (25,30]</span>
<span class="co">#&gt; (0,5]    0.52599427 0.18581300 0.07679768 0.12426808 0.25474374 0.41186182</span>
<span class="co">#&gt; (5,10]   0.29288290 1.00997740 0.36305281 0.16374638 0.17081499 0.25840009</span>
<span class="co">#&gt; (10,15]  0.06667052 0.28903864 1.64841204 0.91137058 0.29504870 0.20701286</span>
<span class="co">#&gt; (15,20]  0.05986376 0.07240857 0.35798564 2.54504759 1.29107515 0.42075295</span>
<span class="co">#&gt; (20,25]  0.09004862 0.06932396 0.11693578 0.64089310 2.24818396 1.07719072</span>
<span class="co">#&gt; (25,30]  0.11255991 0.09096275 0.11066428 0.25914759 0.73514938 1.36117292</span>
<span class="co">#&gt; (30,35]  0.11938691 0.10910875 0.12705260 0.24332546 0.45138299 0.73097344</span>
<span class="co">#&gt; (35,40]  0.10598532 0.12012205 0.14464016 0.24347671 0.38945045 0.56567567</span>
<span class="co">#&gt; (40,45]  0.07395354 0.09626147 0.14831757 0.26043329 0.34203225 0.40693951</span>
<span class="co">#&gt; (45,50]  0.05644447 0.06156270 0.11549296 0.27323270 0.39633643 0.38235708</span>
<span class="co">#&gt; (50,55]  0.05650457 0.04703102 0.07589498 0.22059282 0.44825782 0.52218156</span>
<span class="co">#&gt; (55,60]  0.05590716 0.05084976 0.06285236 0.15130757 0.34737632 0.54979471</span>
<span class="co">#&gt; (60,65]  0.04520209 0.05546897 0.07054250 0.12914496 0.22850804 0.36302311</span>
<span class="co">#&gt; (65,70]  0.03841069 0.04785164 0.07405687 0.14265629 0.20048692 0.24470396</span>
<span class="co">#&gt; (70,75]  0.04798835 0.04067177 0.05702511 0.13028612 0.21034442 0.24343164</span>
<span class="co">#&gt; (75,80]  0.06224025 0.04028923 0.03512512 0.06848598 0.13012188 0.18248323</span>
<span class="co">#&gt; (80,85]  0.04576109 0.03715343 0.02402397 0.02736557 0.04132937 0.06426199</span>
<span class="co">#&gt; (85,Inf] 0.01425634 0.02115353 0.01896116 0.01722831 0.01520627 0.01705683</span>
<span class="co">#&gt;             (30,35]    (35,40]    (40,45]    (45,50]   (50,55]    (55,60]</span>
<span class="co">#&gt; (0,5]    0.44401508 0.32430931 0.21706828 0.17137274 0.1652237 0.16638931</span>
<span class="co">#&gt; (5,10]   0.37964103 0.38319874 0.26534495 0.15970269 0.1110196 0.09963109</span>
<span class="co">#&gt; (10,15]  0.23202247 0.28799006 0.27603640 0.18614084 0.1046770 0.06673747</span>
<span class="co">#&gt; (15,20]  0.26227618 0.24421736 0.25976173 0.22778791 0.1481996 0.08178542</span>
<span class="co">#&gt; (20,25]  0.45540212 0.29733591 0.26316632 0.25126782 0.2058798 0.13271402</span>
<span class="co">#&gt; (25,30]  0.75983758 0.40744580 0.29107889 0.25804778 0.2408878 0.19876014</span>
<span class="co">#&gt; (30,35]  0.83673993 0.54612022 0.33924565 0.25463800 0.2334256 0.23276366</span>
<span class="co">#&gt; (35,40]  0.68922189 0.63242894 0.43757738 0.27959351 0.2062987 0.19660059</span>
<span class="co">#&gt; (40,45]  0.49977557 0.56922844 0.53267323 0.36643051 0.2226525 0.15508703</span>
<span class="co">#&gt; (45,50]  0.35593758 0.39193115 0.46520332 0.46575345 0.3247194 0.19144556</span>
<span class="co">#&gt; (50,55]  0.42019947 0.34018077 0.35659069 0.42800870 0.4410139 0.32987785</span>
<span class="co">#&gt; (55,60]  0.55399107 0.42467824 0.35008877 0.37400622 0.4453129 0.44998218</span>
<span class="co">#&gt; (60,65]  0.46015261 0.43275444 0.35298786 0.32210312 0.3672584 0.44023082</span>
<span class="co">#&gt; (65,70]  0.29297954 0.31670391 0.29650171 0.26159703 0.2627446 0.31806354</span>
<span class="co">#&gt; (70,75]  0.25126820 0.26123907 0.27141502 0.25698389 0.2331870 0.23767021</span>
<span class="co">#&gt; (75,80]  0.19706907 0.19491796 0.20801198 0.22652027 0.2222313 0.19827693</span>
<span class="co">#&gt; (80,85]  0.08125479 0.08337710 0.08638167 0.10180895 0.1231884 0.12763186</span>
<span class="co">#&gt; (85,Inf] 0.02108271 0.02212653 0.02075637 0.02165292 0.0278434 0.03680393</span>
<span class="co">#&gt;             (60,65]    (65,70]    (70,75]    (75,80]    (80,85]    (85,Inf]</span>
<span class="co">#&gt; (0,5]    0.14505686 0.10570113 0.06226457 0.02826070 0.01163570 0.005681602</span>
<span class="co">#&gt; (5,10]   0.09553344 0.08237596 0.05508555 0.02743017 0.01128496 0.004930474</span>
<span class="co">#&gt; (10,15]  0.05585716 0.05410152 0.04526866 0.02817283 0.01357325 0.005217256</span>
<span class="co">#&gt; (15,20]  0.04877212 0.03837721 0.03381377 0.02618003 0.01639444 0.007255938</span>
<span class="co">#&gt; (20,25]  0.06971576 0.03841647 0.02782792 0.02160217 0.01569378 0.008465978</span>
<span class="co">#&gt; (25,30]  0.12176378 0.05872895 0.03114051 0.02003635 0.01475734 0.009052999</span>
<span class="co">#&gt; (30,35]  0.18959609 0.10917389 0.05288460 0.02568789 0.01647547 0.011355297</span>
<span class="co">#&gt; (35,40]  0.19694306 0.15694307 0.09269883 0.04163117 0.02112716 0.013892683</span>
<span class="co">#&gt; (40,45]  0.13479963 0.12942921 0.10836634 0.06117146 0.02844347 0.014963182</span>
<span class="co">#&gt; (45,50]  0.11623910 0.08991024 0.08523751 0.06502524 0.03665469 0.017120309</span>
<span class="co">#&gt; (50,55]  0.18596746 0.10256278 0.07482312 0.05965241 0.04224011 0.022576653</span>
<span class="co">#&gt; (55,60]  0.32729915 0.17811344 0.09896444 0.06193401 0.04393028 0.027472873</span>
<span class="co">#&gt; (60,65]  0.41996784 0.28594388 0.15545252 0.07768125 0.04552342 0.028736349</span>
<span class="co">#&gt; (65,70]  0.39043403 0.39867245 0.24195041 0.10993543 0.05304702 0.029814149</span>
<span class="co">#&gt; (70,75]  0.28192347 0.36521991 0.37518590 0.18056498 0.07301081 0.034693818</span>
<span class="co">#&gt; (75,80]  0.18312002 0.20543156 0.26408765 0.27366604 0.11553027 0.042490353</span>
<span class="co">#&gt; (80,85]  0.10842560 0.09285263 0.09428768 0.11940134 0.13386190 0.052029994</span>
<span class="co">#&gt; (85,Inf] 0.03948091 0.03447994 0.02849221 0.02805714 0.03847808 0.045741573</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $all</span>
<span class="co">#&gt;               (0,5]     (5,10]    (10,15]   (15,20]   (20,25]   (25,30]</span>
<span class="co">#&gt; (0,5]    11.8649086  3.2896996  0.5316674 0.3561768 0.6118567 1.0287793</span>
<span class="co">#&gt; (5,10]    3.2297128 65.1501142  9.3453041 0.4190881 0.3619879 0.6259877</span>
<span class="co">#&gt; (10,15]   0.2710942  5.3674043 75.8587797 3.4887459 0.5101439 0.4062180</span>
<span class="co">#&gt; (15,20]   0.3095117  0.4570203  2.8174323 9.1148243 2.1165771 0.7500029</span>
<span class="co">#&gt; (20,25]   0.6246782  0.7628893  0.7469934 1.4011720 3.9977407 2.0533306</span>
<span class="co">#&gt; (25,30]   0.8743952  1.3390143  1.2154710 0.7032428 1.6317974 2.9400273</span>
<span class="co">#&gt; (30,35]   1.0023342  1.5577554  1.5214742 0.7199064 1.0516239 1.7453448</span>
<span class="co">#&gt; (35,40]   0.9927405  1.9820624  1.7553627 0.7989964 0.9836397 1.3803114</span>
<span class="co">#&gt; (40,45]   0.9137609  2.3529339  2.3188524 1.0226609 1.0003184 1.1584823</span>
<span class="co">#&gt; (45,50]   0.9771697  2.7292557  2.8257811 1.1434929 1.1587185 1.1070791</span>
<span class="co">#&gt; (50,55]   1.0820906  2.8338318  2.6152693 0.8977280 1.1602622 1.2589447</span>
<span class="co">#&gt; (55,60]   0.8223085  2.0420011  1.5526278 0.5157511 0.7989467 1.1404006</span>
<span class="co">#&gt; (60,65]   0.3335462  0.8055158  0.6540950 0.3173505 0.4567341 0.6883036</span>
<span class="co">#&gt; (65,70]   0.1577390  0.2635659  0.2955074 0.2774855 0.3372900 0.4094095</span>
<span class="co">#&gt; (70,75]   0.1446899  0.1510514  0.1788186 0.2571863 0.3354539 0.3680717</span>
<span class="co">#&gt; (75,80]   0.2014620  0.1361754  0.1310141 0.1920437 0.2650423 0.3097623</span>
<span class="co">#&gt; (80,85]   0.2924978  0.1626194  0.1398568 0.1594455 0.1906285 0.2192039</span>
<span class="co">#&gt; (85,Inf]  0.2233660  0.1750341  0.1871031 0.1914277 0.1884091 0.2134377</span>
<span class="co">#&gt;            (30,35]   (35,40]   (40,45]   (45,50]   (50,55]   (55,60]   (60,65]</span>
<span class="co">#&gt; (0,5]    1.2288653 1.0514059 0.7935103 0.5605523 0.4299279 0.3767554 0.3064471</span>
<span class="co">#&gt; (5,10]   1.2093090 1.6100013 1.3965712 1.0345621 0.6591632 0.3714731 0.2672338</span>
<span class="co">#&gt; (10,15]  0.7121834 1.3435282 1.5353381 1.1688496 0.7407646 0.3699509 0.1926895</span>
<span class="co">#&gt; (15,20]  0.6085623 0.9276748 1.2634790 1.2082454 0.8100093 0.3940133 0.1757437</span>
<span class="co">#&gt; (20,25]  1.0255195 0.8192311 0.8921971 0.9601633 0.8311222 0.4837369 0.2202889</span>
<span class="co">#&gt; (25,30]  1.8027179 1.0749830 0.8702318 0.8358666 0.7986937 0.6269364 0.3427528</span>
<span class="co">#&gt; (30,35]  2.2359413 1.4940818 0.9798973 0.7839757 0.6888556 0.6192542 0.4740414</span>
<span class="co">#&gt; (35,40]  1.7858019 1.9206001 1.3391557 0.8783545 0.6294149 0.5033649 0.4528435</span>
<span class="co">#&gt; (40,45]  1.3731572 1.6602036 1.7472980 1.1963169 0.6995088 0.4293520 0.3167530</span>
<span class="co">#&gt; (45,50]  1.0598277 1.1647399 1.4667734 1.5749163 0.9905124 0.4902921 0.2637297</span>
<span class="co">#&gt; (50,55]  1.0588102 0.9206486 1.0105489 1.3016959 1.3799296 0.7917485 0.3581984</span>
<span class="co">#&gt; (55,60]  1.1251892 0.8953606 0.7770313 0.8622943 1.0902047 1.1341050 0.6215773</span>
<span class="co">#&gt; (60,65]  0.8787848 0.8318200 0.6654715 0.5942236 0.6702859 0.8574824 0.9175114</span>
<span class="co">#&gt; (65,70]  0.5356502 0.6515235 0.6183256 0.5029096 0.4517845 0.5150409 0.6923160</span>
<span class="co">#&gt; (70,75]  0.4008020 0.4914174 0.5820725 0.5402890 0.4226149 0.3638323 0.4172525</span>
<span class="co">#&gt; (75,80]  0.3193294 0.3452302 0.4380706 0.5141068 0.4527300 0.3290338 0.2714536</span>
<span class="co">#&gt; (80,85]  0.2249352 0.2215025 0.2608810 0.3571469 0.4164842 0.3450852 0.2321038</span>
<span class="co">#&gt; (85,Inf] 0.2433912 0.2383685 0.2315034 0.2843600 0.4108174 0.4875608 0.3794707</span>
<span class="co">#&gt;            (65,70]    (70,75]    (75,80]    (80,85]   (85,Inf]</span>
<span class="co">#&gt; (0,5]    0.2072337 0.12014761 0.05991349 0.02566780 0.01019370</span>
<span class="co">#&gt; (5,10]   0.2034915 0.12900268 0.06522387 0.02850204 0.01152981</span>
<span class="co">#&gt; (10,15]  0.1435626 0.11162754 0.06654778 0.03006282 0.01208675</span>
<span class="co">#&gt; (15,20]  0.1038503 0.08459296 0.06347550 0.03527408 0.01506019</span>
<span class="co">#&gt; (20,25]  0.1103162 0.07546011 0.06126720 0.04283498 0.02229324</span>
<span class="co">#&gt; (25,30]  0.1549862 0.07990776 0.05677900 0.04537887 0.02936261</span>
<span class="co">#&gt; (30,35]  0.2592654 0.11689343 0.06117691 0.04401840 0.03367740</span>
<span class="co">#&gt; (35,40]  0.3602415 0.20158080 0.09327918 0.05061943 0.03683113</span>
<span class="co">#&gt; (40,45]  0.2974010 0.25234366 0.14652778 0.07240007 0.04317140</span>
<span class="co">#&gt; (45,50]  0.1970382 0.19849423 0.16551669 0.09846289 0.05523939</span>
<span class="co">#&gt; (50,55]  0.1875855 0.14466299 0.13553731 0.10826786 0.06696215</span>
<span class="co">#&gt; (55,60]  0.2821814 0.15316073 0.10905990 0.09308588 0.06786637</span>
<span class="co">#&gt; (60,65]  0.4932927 0.22604532 0.11503998 0.07676400 0.05793810</span>
<span class="co">#&gt; (65,70]  0.7990054 0.41168317 0.16684478 0.08058395 0.04993142</span>
<span class="co">#&gt; (70,75]  0.6040092 0.72360126 0.32175802 0.11783162 0.05394961</span>
<span class="co">#&gt; (75,80]  0.3137362 0.46179099 0.55879980 0.22309751 0.07430663</span>
<span class="co">#&gt; (80,85]  0.1800356 0.19601947 0.27795013 0.31881193 0.12752762</span>
<span class="co">#&gt; (85,Inf] 0.2267480 0.14867998 0.13856854 0.17121600 0.17106318</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># this code is erroring for the moment - something to do with rendering a large plot I think.</span>
<span class="co"># plot_setting_matrices(</span>
<span class="co">#   synthetic_settings_5y_sydney,</span>
<span class="co">#   title = "Setting-specific synthetic contact matrices (Sydney 2020 projected)"</span>
<span class="co"># )</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">home</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-1.png" width="100%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">work</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-2.png" width="100%"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">school</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-3.png" width="100%"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">other</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-4.png" width="100%"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_settings_5y_sydney</span><span class="op">$</span><span class="va">all</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-matrix-differents-5.png" width="100%"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># build synthetic age-structured contact matrices with GAMs</span>
<span class="co"># analysis of polymod data</span>

<span class="co"># set age breaks</span>
<span class="va">age_breaks_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">75</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>
<span class="va">age_breaks_1y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>

<span class="co"># fit a single overall contact model to polymod</span>
<span class="va">m_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_single_contact_model.html">fit_single_contact_model</a></span><span class="op">(</span>
  contact_data <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_contact_data.html">get_polymod_contact_data</a></span><span class="op">(</span><span class="st">"all"</span><span class="op">)</span>,
  population <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">m_all</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Family: poisson </span>
<span class="co">#&gt; Link function: log </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Formula:</span>
<span class="co">#&gt; contacts ~ stats::offset(log(pop_age_to)) + s(age_to) + s(age_from) + </span>
<span class="co">#&gt;     s(abs(age_from - age_to)) + s(abs(age_from - age_to), age_from) + </span>
<span class="co">#&gt;     school_probability + work_probability</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Estimated degrees of freedom:</span>
<span class="co">#&gt;  8.59  8.99  8.73 26.91  total = 57.22 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; fREML score: 21672.8</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># predict contacts at 1y and 5y resolutions for inspection</span>
<span class="va">synthetic_all_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predict_contacts.html">predict_contacts</a></span><span class="op">(</span>
  model <span class="op">=</span> <span class="va">m_all</span>, 
  population <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>,
  age_breaks <span class="op">=</span> <span class="va">age_breaks_5y</span>
<span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/predictions_to_matrix.html">predictions_to_matrix</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">synthetic_all_5y</span>
<span class="co">#&gt;              [0,5)    [5,10)   [10,15)   [15,20)   [20,25)   [25,30)   [30,35)</span>
<span class="co">#&gt; [0,5)    2.3066714 0.9908839 0.2645564 0.2354563 0.4124642 0.7766301 1.0710777</span>
<span class="co">#&gt; [5,10)   0.9269783 5.9322770 1.6412516 0.3293630 0.2982234 0.6008712 1.1470422</span>
<span class="co">#&gt; [10,15)  0.1565049 1.4474163 8.6800435 1.7985496 0.3233863 0.3481690 0.6591402</span>
<span class="co">#&gt; [15,20)  0.1499982 0.2491648 1.6234662 7.7914091 1.6916353 0.4989649 0.5233660</span>
<span class="co">#&gt; [20,25)  0.3063423 0.2979485 0.3740951 1.3685347 4.9022949 1.7557242 0.8332495</span>
<span class="co">#&gt; [25,30)  0.4331285 0.5032399 0.5158615 0.5907021 1.2455709 2.7961723 1.6783187</span>
<span class="co">#&gt; [30,35)  0.4733449 0.6105346 0.6703291 0.7236198 0.8905689 1.4267372 2.0405555</span>
<span class="co">#&gt; [35,40)  0.4699244 0.7175725 0.7798907 0.7671040 0.8894827 1.2986084 1.8578884</span>
<span class="co">#&gt; [40,45)  0.3582584 0.6679588 0.8987900 0.8672943 0.7950559 0.9763717 1.4954771</span>
<span class="co">#&gt; [45,50)  0.2667940 0.4581231 0.7756663 0.9945650 0.9496617 0.8645032 0.9697134</span>
<span class="co">#&gt; [50,55)  0.2655649 0.3320711 0.4924168 0.7948484 1.0862531 1.1630774 1.0402889</span>
<span class="co">#&gt; [55,60)  0.2777921 0.3419629 0.3587456 0.4640038 0.7342441 1.1188652 1.2844896</span>
<span class="co">#&gt; [60,65)  0.2040135 0.3534700 0.3676866 0.3375306 0.3939697 0.6077550 0.9176382</span>
<span class="co">#&gt; [65,70)  0.1203994 0.2500545 0.3426645 0.3377653 0.3191848 0.3711212 0.5108570</span>
<span class="co">#&gt; [70,75)  0.1142273 0.1643896 0.2163573 0.2654114 0.3040918 0.3509925 0.4218244</span>
<span class="co">#&gt; [75,Inf) 0.2470254 0.2700230 0.1951563 0.1714866 0.1945785 0.2185701 0.2669530</span>
<span class="co">#&gt;            [35,40)   [40,45)   [45,50)   [50,55)   [55,60)   [60,65)   [65,70)</span>
<span class="co">#&gt; [0,5)    0.9500182 0.6527267 0.4586965 0.3833718 0.3738467 0.3517170 0.2702781</span>
<span class="co">#&gt; [5,10)   1.3721966 1.0139182 0.6066234 0.3844091 0.2902702 0.2473126 0.2095636</span>
<span class="co">#&gt; [10,15)  1.0893381 1.1153819 0.7583190 0.4332858 0.2554572 0.1823934 0.1553336</span>
<span class="co">#&gt; [15,20)  0.7908657 1.0299195 0.9301544 0.6110496 0.3336612 0.1872230 0.1327858</span>
<span class="co">#&gt; [20,25)  0.8051911 0.9247752 0.9571984 0.7894380 0.5022637 0.2660609 0.1449952</span>
<span class="co">#&gt; [25,30)  1.1079034 0.9868314 0.9545853 0.8641253 0.6612563 0.4033038 0.2053388</span>
<span class="co">#&gt; [30,35)  1.6185596 1.1771951 0.9667918 0.8614808 0.7486034 0.5627574 0.3339562</span>
<span class="co">#&gt; [35,40)  1.9639179 1.5756319 1.0881066 0.7930355 0.6644875 0.5907038 0.4662924</span>
<span class="co">#&gt; [40,45)  2.0099572 1.9641166 1.4276724 0.8569040 0.5346031 0.4189982 0.3961145</span>
<span class="co">#&gt; [45,50)  1.3324301 1.7718716 1.8097805 1.2121827 0.6162796 0.3277839 0.2493536</span>
<span class="co">#&gt; [50,55)  0.9693499 1.1362003 1.4903974 1.5631945 0.9986530 0.4635043 0.2346013</span>
<span class="co">#&gt; [55,60)  1.1066252 0.9392596 1.0323540 1.3060424 1.2905049 0.7835502 0.3631911</span>
<span class="co">#&gt; [60,65)  1.0326332 0.8984769 0.8001077 0.8973472 1.0794111 1.0211226 0.5793323</span>
<span class="co">#&gt; [65,70)  0.6669660 0.7081942 0.6464042 0.6184180 0.6923118 0.8352807 0.8561217</span>
<span class="co">#&gt; [70,75)  0.5135301 0.5941420 0.5974098 0.5274169 0.4643432 0.4814928 0.6514789</span>
<span class="co">#&gt; [75,Inf) 0.3324091 0.3990296 0.4589235 0.4599427 0.3658102 0.2533845 0.2181625</span>
<span class="co">#&gt;            [70,75)  [75,Inf)</span>
<span class="co">#&gt; [0,5)    0.1637861 0.1244027</span>
<span class="co">#&gt; [5,10)   0.1511722 0.1286386</span>
<span class="co">#&gt; [10,15)  0.1321557 0.1444806</span>
<span class="co">#&gt; [15,20)  0.1154218 0.1806738</span>
<span class="co">#&gt; [20,25)  0.1009521 0.1820001</span>
<span class="co">#&gt; [25,30)  0.1070261 0.1622240</span>
<span class="co">#&gt; [30,35)  0.1644020 0.1789747</span>
<span class="co">#&gt; [35,40)  0.2820880 0.2695212</span>
<span class="co">#&gt; [40,45)  0.3436736 0.4228168</span>
<span class="co">#&gt; [45,50)  0.2529511 0.5097593</span>
<span class="co">#&gt; [50,55)  0.1778399 0.4663389</span>
<span class="co">#&gt; [55,60)  0.1902172 0.3849934</span>
<span class="co">#&gt; [60,65)  0.2689729 0.3407465</span>
<span class="co">#&gt; [65,70)  0.4341747 0.3689968</span>
<span class="co">#&gt; [70,75)  0.8467295 0.5947409</span>
<span class="co">#&gt; [75,Inf) 0.3368489 1.2138199</span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">2021</span><span class="op">-</span><span class="fl">09</span><span class="op">-</span><span class="fl">08</span><span class="op">)</span>
<span class="co"># predict contacts at 1y and 5y resolutions for inspection</span>
<span class="va">synthetic_all_5y</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predict_contacts.html">predict_contacts</a></span><span class="op">(</span>
  model <span class="op">=</span> <span class="va">m_all</span>, 
  population <span class="op">=</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>,
  age_breaks <span class="op">=</span> <span class="va">age_breaks_5y</span>
<span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/predictions_to_matrix.html">predictions_to_matrix</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">synthetic_all_5y</span>
<span class="co">#&gt;              [0,5)    [5,10)   [10,15)   [15,20)   [20,25)   [25,30)   [30,35)</span>
<span class="co">#&gt; [0,5)    2.3066714 0.9908839 0.2645564 0.2354563 0.4124642 0.7766301 1.0710777</span>
<span class="co">#&gt; [5,10)   0.9269783 5.9322770 1.6412516 0.3293630 0.2982234 0.6008712 1.1470422</span>
<span class="co">#&gt; [10,15)  0.1565049 1.4474163 8.6800435 1.7985496 0.3233863 0.3481690 0.6591402</span>
<span class="co">#&gt; [15,20)  0.1499982 0.2491648 1.6234662 7.7914091 1.6916353 0.4989649 0.5233660</span>
<span class="co">#&gt; [20,25)  0.3063423 0.2979485 0.3740951 1.3685347 4.9022949 1.7557242 0.8332495</span>
<span class="co">#&gt; [25,30)  0.4331285 0.5032399 0.5158615 0.5907021 1.2455709 2.7961723 1.6783187</span>
<span class="co">#&gt; [30,35)  0.4733449 0.6105346 0.6703291 0.7236198 0.8905689 1.4267372 2.0405555</span>
<span class="co">#&gt; [35,40)  0.4699244 0.7175725 0.7798907 0.7671040 0.8894827 1.2986084 1.8578884</span>
<span class="co">#&gt; [40,45)  0.3582584 0.6679588 0.8987900 0.8672943 0.7950559 0.9763717 1.4954771</span>
<span class="co">#&gt; [45,50)  0.2667940 0.4581231 0.7756663 0.9945650 0.9496617 0.8645032 0.9697134</span>
<span class="co">#&gt; [50,55)  0.2655649 0.3320711 0.4924168 0.7948484 1.0862531 1.1630774 1.0402889</span>
<span class="co">#&gt; [55,60)  0.2777921 0.3419629 0.3587456 0.4640038 0.7342441 1.1188652 1.2844896</span>
<span class="co">#&gt; [60,65)  0.2040135 0.3534700 0.3676866 0.3375306 0.3939697 0.6077550 0.9176382</span>
<span class="co">#&gt; [65,70)  0.1203994 0.2500545 0.3426645 0.3377653 0.3191848 0.3711212 0.5108570</span>
<span class="co">#&gt; [70,75)  0.1142273 0.1643896 0.2163573 0.2654114 0.3040918 0.3509925 0.4218244</span>
<span class="co">#&gt; [75,Inf) 0.2470254 0.2700230 0.1951563 0.1714866 0.1945785 0.2185701 0.2669530</span>
<span class="co">#&gt;            [35,40)   [40,45)   [45,50)   [50,55)   [55,60)   [60,65)   [65,70)</span>
<span class="co">#&gt; [0,5)    0.9500182 0.6527267 0.4586965 0.3833718 0.3738467 0.3517170 0.2702781</span>
<span class="co">#&gt; [5,10)   1.3721966 1.0139182 0.6066234 0.3844091 0.2902702 0.2473126 0.2095636</span>
<span class="co">#&gt; [10,15)  1.0893381 1.1153819 0.7583190 0.4332858 0.2554572 0.1823934 0.1553336</span>
<span class="co">#&gt; [15,20)  0.7908657 1.0299195 0.9301544 0.6110496 0.3336612 0.1872230 0.1327858</span>
<span class="co">#&gt; [20,25)  0.8051911 0.9247752 0.9571984 0.7894380 0.5022637 0.2660609 0.1449952</span>
<span class="co">#&gt; [25,30)  1.1079034 0.9868314 0.9545853 0.8641253 0.6612563 0.4033038 0.2053388</span>
<span class="co">#&gt; [30,35)  1.6185596 1.1771951 0.9667918 0.8614808 0.7486034 0.5627574 0.3339562</span>
<span class="co">#&gt; [35,40)  1.9639179 1.5756319 1.0881066 0.7930355 0.6644875 0.5907038 0.4662924</span>
<span class="co">#&gt; [40,45)  2.0099572 1.9641166 1.4276724 0.8569040 0.5346031 0.4189982 0.3961145</span>
<span class="co">#&gt; [45,50)  1.3324301 1.7718716 1.8097805 1.2121827 0.6162796 0.3277839 0.2493536</span>
<span class="co">#&gt; [50,55)  0.9693499 1.1362003 1.4903974 1.5631945 0.9986530 0.4635043 0.2346013</span>
<span class="co">#&gt; [55,60)  1.1066252 0.9392596 1.0323540 1.3060424 1.2905049 0.7835502 0.3631911</span>
<span class="co">#&gt; [60,65)  1.0326332 0.8984769 0.8001077 0.8973472 1.0794111 1.0211226 0.5793323</span>
<span class="co">#&gt; [65,70)  0.6669660 0.7081942 0.6464042 0.6184180 0.6923118 0.8352807 0.8561217</span>
<span class="co">#&gt; [70,75)  0.5135301 0.5941420 0.5974098 0.5274169 0.4643432 0.4814928 0.6514789</span>
<span class="co">#&gt; [75,Inf) 0.3324091 0.3990296 0.4589235 0.4599427 0.3658102 0.2533845 0.2181625</span>
<span class="co">#&gt;            [70,75)  [75,Inf)</span>
<span class="co">#&gt; [0,5)    0.1637861 0.1244027</span>
<span class="co">#&gt; [5,10)   0.1511722 0.1286386</span>
<span class="co">#&gt; [10,15)  0.1321557 0.1444806</span>
<span class="co">#&gt; [15,20)  0.1154218 0.1806738</span>
<span class="co">#&gt; [20,25)  0.1009521 0.1820001</span>
<span class="co">#&gt; [25,30)  0.1070261 0.1622240</span>
<span class="co">#&gt; [30,35)  0.1644020 0.1789747</span>
<span class="co">#&gt; [35,40)  0.2820880 0.2695212</span>
<span class="co">#&gt; [40,45)  0.3436736 0.4228168</span>
<span class="co">#&gt; [45,50)  0.2529511 0.5097593</span>
<span class="co">#&gt; [50,55)  0.1778399 0.4663389</span>
<span class="co">#&gt; [55,60)  0.1902172 0.3849934</span>
<span class="co">#&gt; [60,65)  0.2689729 0.3407465</span>
<span class="co">#&gt; [65,70)  0.4341747 0.3689968</span>
<span class="co">#&gt; [70,75)  0.8467295 0.5947409</span>
<span class="co">#&gt; [75,Inf) 0.3368489 1.2138199</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="fu"><a href="reference/plot_matrix.html">plot_matrix</a></span><span class="op">(</span><span class="va">synthetic_all_5y</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"synthetic all at once"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-matrix-plot-1.png" width="100%"></p>
</div>
<div id="speeding-up-computation-with-future" class="section level2">
<h2 class="hasAnchor">
<a href="#speeding-up-computation-with-future" class="anchor"></a>Speeding up computation with <code>future</code>
</h2>
<p><code>conmat</code> now supports parallelisation, which is useful in a couple of contexts with the model fitting, here is an example:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org">future</a></span><span class="op">)</span>
<span class="fu"><a href="https://future.futureverse.org/reference/plan.html">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<p>We set the future plan, saying multisession, with 4 workers.</p>
<p>Then we run the code as normal:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">polymod_setting_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_polymod_setting_data.html">get_polymod_setting_data</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">polymod_population</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_polymod_population.html">get_polymod_population</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">contact_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_setting_contacts.html">fit_setting_contacts</a></span><span class="op">(</span>
  contact_data_list <span class="op">=</span> <span class="va">polymod_setting_data</span>,
  survey_population <span class="op">=</span> <span class="va">polymod_population</span>
<span class="op">)</span>

<span class="va">contact_model_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predict_setting_contacts.html">predict_setting_contacts</a></span><span class="op">(</span>
  population <span class="op">=</span> <span class="va">polymod_population</span>,
  contact_model <span class="op">=</span> <span class="va">contact_model</span>,
  age_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">75</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="cn">Inf</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Notably this is about 3 times faster than without using that plan.</p>
</div>
<div id="data-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#data-sources" class="anchor"></a>Data sources</h2>
<p>This package provides data for use in calculating contact matrices.</p>
<p>These data are still being cleaned and processed, but their current forms are shown below:</p>
<div id="abs_education_state" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_education_state" class="anchor"></a>abs_education_state</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_education_state</span>
<span class="co">#&gt; # A tibble: 4,194 × 5</span>
<span class="co">#&gt;     year state aboriginal_and_torres_strait_islander_status   age n_full_and_part…</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;                                        &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2006 ACT   Aboriginal and Torres Strait Islander            4                5</span>
<span class="co">#&gt;  2  2006 ACT   Non-Indigenous                                   4              109</span>
<span class="co">#&gt;  3  2006 NSW   Aboriginal and Torres Strait Islander            4              104</span>
<span class="co">#&gt;  4  2006 NSW   Non-Indigenous                                   4             1870</span>
<span class="co">#&gt;  5  2006 NT    Aboriginal and Torres Strait Islander            4              102</span>
<span class="co">#&gt;  6  2006 NT    Non-Indigenous                                   4               63</span>
<span class="co">#&gt;  7  2006 QLD   Aboriginal and Torres Strait Islander            4               37</span>
<span class="co">#&gt;  8  2006 QLD   Non-Indigenous                                   4              740</span>
<span class="co">#&gt;  9  2006 SA    Aboriginal and Torres Strait Islander            4               42</span>
<span class="co">#&gt; 10  2006 SA    Non-Indigenous                                   4             1023</span>
<span class="co">#&gt; # … with 4,184 more rows</span></code></pre></div>
</div>
<div id="abs_education_state_2020" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_education_state_2020" class="anchor"></a>abs_education_state_2020</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_education_state_2020</span>
<span class="co">#&gt; # A tibble: 808 × 6</span>
<span class="co">#&gt;     year state   age population population_interpolated  prop</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;      &lt;dbl&gt;                   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2020 ACT       0          0                   5569. 0    </span>
<span class="co">#&gt;  2  2020 ACT       1          0                   5702. 0    </span>
<span class="co">#&gt;  3  2020 ACT       2          0                   5781. 0    </span>
<span class="co">#&gt;  4  2020 ACT       3          0                   5814. 0    </span>
<span class="co">#&gt;  5  2020 ACT       4          0                   5809. 0    </span>
<span class="co">#&gt;  6  2020 ACT       5       4558                   5772. 0.790</span>
<span class="co">#&gt;  7  2020 ACT       6       6161                   5710. 1.08 </span>
<span class="co">#&gt;  8  2020 ACT       7       6163                   5623. 1.10 </span>
<span class="co">#&gt;  9  2020 ACT       8       5881                   5510. 1.07 </span>
<span class="co">#&gt; 10  2020 ACT       9       5921                   5370. 1.10 </span>
<span class="co">#&gt; # … with 798 more rows</span></code></pre></div>
</div>
<div id="abs_employ_age_lga" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_employ_age_lga" class="anchor"></a>abs_employ_age_lga</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_employ_age_lga</span>
<span class="co">#&gt; # A tibble: 5,600 × 8</span>
<span class="co">#&gt;     year state lga    age_group total_employed total_unemployed total_labour_fo…</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2016 NSW   Albur… 15-19               1527              300             1830</span>
<span class="co">#&gt;  2  2016 NSW   Armid… 15-19                838              217             1055</span>
<span class="co">#&gt;  3  2016 NSW   Balli… 15-19               1064              185             1255</span>
<span class="co">#&gt;  4  2016 NSW   Balra… 15-19                 41                9               46</span>
<span class="co">#&gt;  5  2016 NSW   Bathu… 15-19               1103              241             1341</span>
<span class="co">#&gt;  6  2016 NSW   Bega … 15-19                801               97              897</span>
<span class="co">#&gt;  7  2016 NSW   Belli… 15-19                241               42              281</span>
<span class="co">#&gt;  8  2016 NSW   Berri… 15-19                168               16              181</span>
<span class="co">#&gt;  9  2016 NSW   Black… 15-19               7534             2136             9670</span>
<span class="co">#&gt; 10  2016 NSW   Bland… 15-19                124               14              140</span>
<span class="co">#&gt; # … with 5,590 more rows, and 1 more variable: total &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="abs_household_lga" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_household_lga" class="anchor"></a>abs_household_lga</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_household_lga</span>
<span class="co">#&gt; # A tibble: 4,968 × 5</span>
<span class="co">#&gt;     year state lga                   n_persons_usually_resident n_households</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;                 &lt;chr&gt;                             &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2016 NSW   Albury (C)            total                             19495</span>
<span class="co">#&gt;  2  2016 NSW   Albury (C)            1                                  6020</span>
<span class="co">#&gt;  3  2016 NSW   Albury (C)            2                                  6738</span>
<span class="co">#&gt;  4  2016 NSW   Albury (C)            3                                  2740</span>
<span class="co">#&gt;  5  2016 NSW   Albury (C)            4                                  2541</span>
<span class="co">#&gt;  6  2016 NSW   Albury (C)            5                                  1041</span>
<span class="co">#&gt;  7  2016 NSW   Albury (C)            6                                   311</span>
<span class="co">#&gt;  8  2016 NSW   Albury (C)            7                                    56</span>
<span class="co">#&gt;  9  2016 NSW   Albury (C)            8+                                   42</span>
<span class="co">#&gt; 10  2016 NSW   Armidale Regional (A) total                             10276</span>
<span class="co">#&gt; # … with 4,958 more rows</span></code></pre></div>
</div>
<div id="abs_pop_age_lga_2016" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_pop_age_lga_2016" class="anchor"></a>abs_pop_age_lga_2016</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_pop_age_lga_2016</span>
<span class="co">#&gt; # A tibble: 9,792 × 5</span>
<span class="co">#&gt;     year state lga                age_group population</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;              &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2016 ACT   Unincorporated ACT 0-4            28054</span>
<span class="co">#&gt;  2  2016 ACT   Unincorporated ACT 5-9            25767</span>
<span class="co">#&gt;  3  2016 ACT   Unincorporated ACT 10-14          22170</span>
<span class="co">#&gt;  4  2016 ACT   Unincorporated ACT 15-19          24906</span>
<span class="co">#&gt;  5  2016 ACT   Unincorporated ACT 20-24          32615</span>
<span class="co">#&gt;  6  2016 ACT   Unincorporated ACT 25-29          34243</span>
<span class="co">#&gt;  7  2016 ACT   Unincorporated ACT 30-34          34574</span>
<span class="co">#&gt;  8  2016 ACT   Unincorporated ACT 35-39          30340</span>
<span class="co">#&gt;  9  2016 ACT   Unincorporated ACT 40-44          28387</span>
<span class="co">#&gt; 10  2016 ACT   Unincorporated ACT 45-49          26431</span>
<span class="co">#&gt; # … with 9,782 more rows</span></code></pre></div>
</div>
<div id="abs_pop_age_lga_2020" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_pop_age_lga_2020" class="anchor"></a>abs_pop_age_lga_2020</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_pop_age_lga_2020</span>
<span class="co">#&gt; # A tibble: 9,774 × 5</span>
<span class="co">#&gt;     year state lga                age_group population</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;              &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1  2020 ACT   Unincorporated ACT 0-4            27861</span>
<span class="co">#&gt;  2  2020 ACT   Unincorporated ACT 5-9            28871</span>
<span class="co">#&gt;  3  2020 ACT   Unincorporated ACT 10-14          26015</span>
<span class="co">#&gt;  4  2020 ACT   Unincorporated ACT 15-19          23867</span>
<span class="co">#&gt;  5  2020 ACT   Unincorporated ACT 20-24          32626</span>
<span class="co">#&gt;  6  2020 ACT   Unincorporated ACT 25-29          33992</span>
<span class="co">#&gt;  7  2020 ACT   Unincorporated ACT 30-34          35734</span>
<span class="co">#&gt;  8  2020 ACT   Unincorporated ACT 35-39          35354</span>
<span class="co">#&gt;  9  2020 ACT   Unincorporated ACT 40-44          30155</span>
<span class="co">#&gt; 10  2020 ACT   Unincorporated ACT 45-49          29103</span>
<span class="co">#&gt; # … with 9,764 more rows</span></code></pre></div>
</div>
<div id="abs_state_age" class="section level3">
<h3 class="hasAnchor">
<a href="#abs_state_age" class="anchor"></a>abs_state_age</h3>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abs_state_age</span>
<span class="co">#&gt; # A tibble: 168 × 3</span>
<span class="co">#&gt;    state age_group population</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt;  1 NSW   0-4           495060</span>
<span class="co">#&gt;  2 VIC   0-4           401992</span>
<span class="co">#&gt;  3 QLD   0-4           314592</span>
<span class="co">#&gt;  4 SA    0-4            98400</span>
<span class="co">#&gt;  5 WA    0-4           171531</span>
<span class="co">#&gt;  6 TAS   0-4            29258</span>
<span class="co">#&gt;  7 NT    0-4            17766</span>
<span class="co">#&gt;  8 ACT   0-4            27846</span>
<span class="co">#&gt;  9 NSW   5-9           512687</span>
<span class="co">#&gt; 10 VIC   5-9           416633</span>
<span class="co">#&gt; # … with 158 more rows</span></code></pre></div>
</div>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the conmat project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Learn more at <br><a href="https://github.com/njtierney/conmat">https://​github.com/​njtierney/​conmat</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Tierney <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0003-1460-8722" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Nick Golding <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8916-5570" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://codecov.io/gh/njtierney/conmat?branch=master"><img src="https://codecov.io/gh/njtierney/conmat/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/njtierney/conmat/actions"><img src="https://github.com/njtierney/conmat/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Nick Golding.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
